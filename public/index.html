<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>茶舍</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="作为个人博客网站，使用 hexo 开源框架。 Markdown、Gallery、PicGo、Hexo、FFMPEG、Beyond-Compare、Dart、Flutter、Swift、算法">
<meta property="og:type" content="website">
<meta property="og:title" content="茶舍">
<meta property="og:url" content="https://illusorycat.github.io/index.html">
<meta property="og:site_name" content="茶舍">
<meta property="og:description" content="作为个人博客网站，使用 hexo 开源框架。 Markdown、Gallery、PicGo、Hexo、FFMPEG、Beyond-Compare、Dart、Flutter、Swift、算法">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Illusory">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="茶舍" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">茶舍</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://illusorycat.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Swift-Algorithm-5-Array" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/04/Swift-Algorithm-5-Array/" class="article-date">
  <time class="dt-published" datetime="2024-06-04T03:07:31.000Z" itemprop="datePublished">2024-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/04/Swift-Algorithm-5-Array/">Swift 算法-5-数组</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#53">最大子数组和</a><br><a href="#56">合并区间</a><br><a href="#189">轮转数组</a><br><a href="#238">除自身以外数组的乘积</a><br><a href="#41">缺失的第一个正数</a></p>
<h1 id="0">前言</h1>

<p>本文题目来源 LeetCode ，主要用于记录笔者的一些解题思路和思考。<br><br>本文的主题是普通数组。<br></p>
<h1 id="53">最大子数组和</h1>

<p>LeetCode 53. 最大子数组和<br></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给你一个整数数组 nums ，请你找出一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。<br><br>子数组是数组中的一个连续部分。<br></p>
<h2 id="解题思考"><a href="#解题思考" class="headerlink" title="解题思考"></a>解题思考</h2><p>根据题目要求，我们要找出数组中 <code>[i,j]</code> 集合的和最大值。<br><br>$$<br>[i,j] &#x3D; \begin{cases}<br>[0…j] - [0…i - 1] &amp; (0 &lt; i \leq j) \<br>[0…j] &amp; (0 &lt; j)<br>\end{cases}<br>$$<br>也就是说，我们只需要遍历一次数组，计算 <code>[0...i]</code> 的值，并取出最大值和最小值相减，即可得到答案。<br><br>同时，存在一个临界条件，如果 <code>[0...i]</code> 刚好就是题目的答案，则对应的应减去的最小值是 0 。<br><br>并且，使用最大值和最小值时需保证不是同一个值。<br><br>所以我们直接在遍历数组时计算 <code>[0...j]</code> 的值，并取出前面计算得到的最小值，然后相减，再判断其是不是和最大值。<br></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">maxSubArray</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> minInt <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> maxAns <span class="operator">=</span> <span class="type">Int</span>.min</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> sum <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</span><br><span class="line">            sum <span class="operator">+=</span> num</span><br><span class="line">            maxAns <span class="operator">=</span> <span class="built_in">max</span>(maxAns, sum <span class="operator">-</span> minInt)</span><br><span class="line">            minInt <span class="operator">=</span> <span class="built_in">min</span>(minInt, sum)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxAns</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拓展解法"><a href="#拓展解法" class="headerlink" title="拓展解法"></a>拓展解法</h2><p>上面的思路还是不够直接，我们直接遍历数组计算 <code>[0...j]</code> ，判断 <code>[0...j]</code> 和 <code>[0...j - 1]</code> 的大小。<br></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">maxSubArray</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> prev <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</span><br><span class="line">            prev <span class="operator">=</span> <span class="built_in">max</span>(prev <span class="operator">+</span> num, num)</span><br><span class="line">            ans <span class="operator">=</span> <span class="built_in">max</span>(ans, prev)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="56">合并区间</h1>

<p>LeetCode 56. 合并区间<br></p>
<h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p>以数组 <code>intervals</code> 表示若干个区间的集合，其中单个区间为 <code>intervals[i] = [starti, endi]</code> 。请你合并所有重叠的区间，并返回 一个不重叠的区间数组，该数组需恰好覆盖输入中的所有区间 。<br></p>
<h2 id="解题思考-1"><a href="#解题思考-1" class="headerlink" title="解题思考"></a>解题思考</h2><p>首先我们要先排序数组，排序的规则时以区间 start 做递增排序。<br><br>然后判断后一个区间的 start 是否小于等于前一个区间的 end ，如果是则可以合并。<br></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">merge</span>(<span class="keyword">_</span> <span class="params">intervals</span>: [[<span class="type">Int</span>]]) -&gt; [[<span class="type">Int</span>]] &#123;</span><br><span class="line">        <span class="keyword">var</span> sorted <span class="operator">=</span> intervals.sorted &#123; <span class="variable">$0</span>[<span class="number">0</span>] <span class="operator">&lt;</span> <span class="variable">$1</span>[<span class="number">0</span>] &#125;</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> [[<span class="type">Int</span>]]()</span><br><span class="line">        <span class="keyword">var</span> i <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i <span class="operator">&lt;</span> sorted.count &#123;</span><br><span class="line">            <span class="keyword">var</span> interval <span class="operator">=</span> sorted[i]</span><br><span class="line">            <span class="keyword">while</span> i <span class="operator">&lt;</span> sorted.count <span class="operator">&amp;&amp;</span> sorted[i][<span class="number">0</span>] <span class="operator">&lt;=</span> interval[<span class="number">1</span>] &#123;</span><br><span class="line">                interval[<span class="number">1</span>] <span class="operator">=</span> <span class="built_in">max</span>(interval[<span class="number">1</span>], sorted[i][<span class="number">1</span>])</span><br><span class="line">                i <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            ans.append(interval)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="189">轮转数组</h1>

<p>LeetCode 189. 轮转数组<br></p>
<h2 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h2><p>给定一个整数数组 nums，将数组中的元素向右轮转 k 个位置，其中 k 是非负数。<br></p>
<h2 id="解题思考-2"><a href="#解题思考-2" class="headerlink" title="解题思考"></a>解题思考</h2><ol>
<li>第一种解题思路<br> 最简单的，使用一个新的数组，然后根据轮转要求，将旧数组移动到新数组</li>
<li>第二种解题思路<br> 遍历数组，将下标 i 上的元素移动到 i + k 的位置上，再把 i + k 上的元素移动到 i + k + k 上。<br><br> 在某些情况下，整个数组的元素会形成一个闭环。<br> 在某些情况下，数组中的元素会形成多个互相独立的闭环。因此你需要遍历这些闭环。比如你从下标 0 开始，移动元素 n 次后又回到了下标 0 。但是这时候数组中有些元素还没有被移动的。<br><br> 根据笔者的实验，如果数组中存在 n 个闭环，则可以将数组开头的 n 个元素作为每个闭环的开头。<br><br> 那怎么计算数组有几个闭环呢，答案就是数组的闭环数量等于数组元素个数 <code>count</code> 和轮转数 <code>k</code> 的最大公约数。<br></li>
<li>第三种解题思路<br> 我们举个实例的例子。现在有一个数组 [1, 2, 3, 4, 5, 6, 7] ，我们要轮转 3 个位置，显而易见答案是 [5, 6, 7, 1, 2, 3, 4] 。再仔细一看，可以看到下述的变换。<br><br> $$<br> [1, 2, 3, 4, 5, 6, 7] \<br> &#x3D;&gt; [7, 6, 5, 4, 3, 2, 1] \<br> &#x3D;&gt; [5, 6, 7, 4, 3, 2, 1] \<br> &#x3D;&gt; [5, 6, 7, 1, 2, 3, 4]<br> $$<br> 其实也就是去翻转数组的某个区间</li>
</ol>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">rotate</span>(<span class="keyword">_</span> <span class="params">nums</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> nums.count</span><br><span class="line">        <span class="keyword">let</span> times <span class="operator">=</span> k <span class="operator">%</span> count</span><br><span class="line">        <span class="keyword">guard</span> times <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        <span class="keyword">let</span> origin <span class="operator">=</span> nums</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count &#123;</span><br><span class="line">            nums[(i <span class="operator">+</span> times) <span class="operator">%</span> count] <span class="operator">=</span> origin[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">rotate_2</span>(<span class="keyword">_</span> <span class="params">nums</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">guard</span> k <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> nums.count</span><br><span class="line">        <span class="keyword">let</span> times <span class="operator">=</span> gcd(count, k)</span><br><span class="line">        <span class="keyword">let</span> loop <span class="operator">=</span> count <span class="operator">/</span> times</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>times &#123;</span><br><span class="line">            <span class="keyword">var</span> prev <span class="operator">=</span> nums[i]</span><br><span class="line">            <span class="keyword">var</span> nextIndex <span class="operator">=</span> i</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>loop &#123;</span><br><span class="line">                nextIndex <span class="operator">=</span> (nextIndex <span class="operator">+</span> k) <span class="operator">%</span> count</span><br><span class="line">                <span class="built_in">swap</span>(<span class="operator">&amp;</span>prev, <span class="operator">&amp;</span>nums[nextIndex])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">gcd</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> a <span class="operator">=</span> a</span><br><span class="line">        <span class="keyword">var</span> b <span class="operator">=</span> b</span><br><span class="line">        <span class="keyword">while</span> b <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> r <span class="operator">=</span> a <span class="operator">%</span> b</span><br><span class="line">            a <span class="operator">=</span> b</span><br><span class="line">            b <span class="operator">=</span> r</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">rotate_3</span>(<span class="keyword">_</span> <span class="params">nums</span>: <span class="keyword">inout</span> [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> nums.count</span><br><span class="line">        <span class="keyword">let</span> step <span class="operator">=</span> k <span class="operator">%</span> count</span><br><span class="line">        <span class="keyword">guard</span> step <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">        nums.reverse()</span><br><span class="line">        nums[<span class="number">0</span><span class="operator">..&lt;</span>step].reverse()</span><br><span class="line">        nums[step<span class="operator">..&lt;</span>count].reverse()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="238">除自身以外数组的乘积</h1>

<p>LeetCode 238. 除自身以外数组的乘积<br></p>
<h2 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h2><p>给你一个整数数组 nums，返回 数组 answer ，其中 answer[i] 等于 nums 中除 nums[i] 之外其余各元素的乘积 。<br><br>题目数据 保证 数组 nums之中任意元素的全部前缀元素和后缀的乘积都在  32 位 整数范围内。<br><br>请 不要使用除法，且在 O(n) 时间复杂度内完成此题。<br></p>
<h2 id="解题思考-3"><a href="#解题思考-3" class="headerlink" title="解题思考"></a>解题思考</h2><p>可以计算前缀乘积和后缀乘积，然后再计算出除自身以外数组的乘积。<br><br>一般情况下，使用两个数组分别存储前缀和后缀乘积。<br><br>可以只使用一个数组，来解决前缀乘积和后缀乘积以及最终结果的存储吗？<br></p>
<h2 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">productExceptSelf</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> nums.count</span><br><span class="line">        <span class="keyword">var</span> product <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">1</span>, count: nums.count)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count &#123;</span><br><span class="line">            ans[i] <span class="operator">=</span> product</span><br><span class="line">            product <span class="operator">*=</span> nums[i]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        product <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">stride</span>(from: count <span class="operator">-</span> <span class="number">1</span>, through: <span class="number">0</span>, by: <span class="operator">-</span><span class="number">1</span>) &#123;</span><br><span class="line">            ans[i] <span class="operator">*=</span> product</span><br><span class="line">            product <span class="operator">*=</span> nums[i]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="41">缺失的第一个正数</h1>

<p>LeetCode 41. 缺失的第一个正数<br></p>
<h2 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h2><p>给你一个未排序的整数数组 nums ，请你找出其中没有出现的最小的正整数。<br><br>请你实现时间复杂度为 O(n) 并且只使用常数级别额外空间的解决方案。<br></p>
<h2 id="解题思考-4"><a href="#解题思考-4" class="headerlink" title="解题思考"></a>解题思考</h2><p>设置一个阈值，从 0 开始。遍历数组，如果大于阈值，判断是否与阈值临近，然后临近，提升阈值。如果不是，暂时记录这个值。<br><br>比如现在有一个数组 [-1, 0, 1, 2, 4, 3, 7,9]，将阈值从 0 开始， 遍历数组，发现数据 -1 ，0 时，直接丢弃。遍历到 1，2 时，将阈值分别提升到 1，2。遍历到 4 的时候，因为这个数值大于阈值，但是又与阈值不连续，所以暂时先存储起来，我们使用 Set 结构存储。再遍历到 3 时，因为与阈值连续，所以提升阈值到 3 ，同时判断到 Set 中有跟阈值连续的 4 ，所以将 4 从 Set 中移除，然后提升阈值到 4 。以此类推…<br></p>
<h2 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">firstMissingPositive</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> threshold <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">set</span> <span class="operator">=</span> <span class="type">Set</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</span><br><span class="line">            <span class="keyword">if</span> num <span class="operator">&gt;</span> threshold &#123;</span><br><span class="line">                <span class="keyword">set</span>.insert(num)</span><br><span class="line">                <span class="keyword">while</span> <span class="keyword">set</span>.contains(threshold <span class="operator">+</span> <span class="number">1</span>) &#123;</span><br><span class="line">                    threshold <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                    <span class="keyword">set</span>.remove(threshold)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> threshold <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拓展解法-1"><a href="#拓展解法-1" class="headerlink" title="拓展解法"></a>拓展解法</h2><p>事实上，上述解法的空间复杂度是 O(n) 。但是题目要求使用常数级别额外空间。<br><br>事实上，对于长度为 N 的数组，其缺失的第一个正数肯定在 [1…N + 1] 范围内。<br><br>然后，我们在遍历数组之时，如果发现了这个范围内的数，我们可以做标记。最后查询第一个没有出现的标记即为答案。<br><br>很明显，这个标识可以与数组绑定在一起，那我们就可以当找到数字 i 时，将下标为 i - 1 位置上的元素做个标记，因为我们只关注正数，所以我们可以使用负数来做标记。<br><br>那对于原先就存在的负数，因为这些数据是我们不关注的数据，所以我们可以一开始就将所有的负数改为 N + 1 。因为 N + 1 这个数也不会影响结果。<br><br>最后，我们就可以遍历数组，当找到第一个元素不是负数的下标 index 时，答案就是 index + 1 。<br></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">firstMissingPositive</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> count <span class="operator">=</span> nums.count</span><br><span class="line">        <span class="keyword">var</span> nums <span class="operator">=</span> nums</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count &#123;</span><br><span class="line">            <span class="keyword">if</span> nums[i] <span class="operator">&lt;=</span> <span class="number">0</span> &#123;</span><br><span class="line">                nums[i] <span class="operator">=</span> count <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(num) <span class="operator">&lt;=</span> count &#123;</span><br><span class="line">                nums[<span class="built_in">abs</span>(num) <span class="operator">-</span> <span class="number">1</span>] <span class="operator">=</span> <span class="operator">-</span><span class="built_in">abs</span>(nums[<span class="built_in">abs</span>(num) <span class="operator">-</span> <span class="number">1</span>])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count &#123;</span><br><span class="line">            <span class="keyword">if</span> nums[i] <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> i <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/06/04/Swift-Algorithm-5-Array/" data-id="clx18nszk0000ebqedivd99n9" data-title="Swift 算法-5-数组" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Swift-Algorithm-4-Substring" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/30/Swift-Algorithm-4-Substring/" class="article-date">
  <time class="dt-published" datetime="2024-05-30T02:11:33.000Z" itemprop="datePublished">2024-05-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/30/Swift-Algorithm-4-Substring/">Swift 算法-4-子串</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#560">和为 K 的子数组</a><br><a href="#239">滑动窗口最大值</a><br><a href="#76">最小覆盖子串</a></p>
<h1 id="0">前言</h1>

<p>本文题目来源 LeetCode ，主要用于记录笔者的一些解题思路和思考。<br><br>本文的主题是子串。<br></p>
<h1 id="560">和为 K 的子数组</h1>

<p>LeetCode 560. 和为 K 的子数组<br></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给你一个整数数组 nums 和一个整数 k ，请你统计并返回 该数组中和为 k 的子数组的个数 。<br><br>子数组是数组中元素的连续非空序列。<br></p>
<h2 id="解题思考"><a href="#解题思考" class="headerlink" title="解题思考"></a>解题思考</h2><p>像这一类的题目，本质上都是找出子串。那子串有两个标识，一个是子串开头，一个是子串长度。<br><br>我们可以遍历数组 nums ，将其每个元素作为子串开头，再来找出以该元素作为子串开头的所有子串中满足条件的子串。<br></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">subarraySum</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>nums.count &#123;</span><br><span class="line">            <span class="keyword">var</span> sum <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> i<span class="operator">..&lt;</span>nums.count &#123;</span><br><span class="line">                sum <span class="operator">+=</span> nums[j]</span><br><span class="line">                <span class="keyword">if</span> sum <span class="operator">==</span> k &#123;</span><br><span class="line">                    ans <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拓展解法"><a href="#拓展解法" class="headerlink" title="拓展解法"></a>拓展解法</h2><p>上述遍历的方法的时间复杂度是 O($n^2$)。<br><br>我们可以使用数学来获得另一个解法。<br><br>$$[i…j] &#x3D;&#x3D; k  &#x3D;&gt; [0…j] &#x3D; k + [0…i-1] (0&lt;i \leq j)$$<br>$$[0…j] &#x3D;&#x3D; k (0 &lt;&#x3D; j)$$<br>问题就简化成了计算数组中 $[0…j]$ 的值，然后再判断是否存在与之相等的 $k + [0…i - 1]$ 。我们可以使用哈希表来存储 $[0…j]$ 的值。<br><br>实际上在编写代码时我们一般会使用 $[0…j] - K &#x3D;&#x3D; [0…i - 1]$ ，因此有一种边界情况需要处理，$[0…j] &#x3D;&#x3D; k$ 。这种特殊情况下，是不存在 $[0…i - 1]$ 子串的，所以我们需要在初始化哈希表时对这种情况做处理。<br></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">subarraySum</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> map <span class="operator">=</span> [<span class="type">Int</span>: <span class="type">Int</span>]()</span><br><span class="line">        map[<span class="number">0</span>] <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> sum <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</span><br><span class="line">            sum <span class="operator">+=</span> num</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> count <span class="operator">=</span> map[sum <span class="operator">-</span> k] &#123;</span><br><span class="line">                ans <span class="operator">+=</span> count</span><br><span class="line">            &#125;</span><br><span class="line">            map[sum] <span class="operator">=</span> (map[sum] <span class="operator">??</span> <span class="number">0</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="239">滑动窗口最大值</h1>

<p>LeetCode 239. 滑动窗口最大值<br></p>
<h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p>给你一个整数数组 nums，有一个大小为 k 的滑动窗口从数组的最左侧移动到数组的最右侧。你只可以看到在滑动窗口内的 k 个数字。滑动窗口每次只向右移动一位。<br><br>返回 滑动窗口中的最大值 。</p>
<h2 id="解题思考-1"><a href="#解题思考-1" class="headerlink" title="解题思考"></a>解题思考</h2><p>找到滑动窗口中的最大值，一个直接的思路就是，遍历数组，在滑动窗口中，如果后一个元素比当前滑动窗口中找到的最大值大，那这个就是新的最大值。如果后一个元素比较小，那这个元素仍然得保留，因为有可能是滑动窗口移动过程中，前面的那个最大值会被移出滑动窗口，而这个元素可能成为最大值。<br><br>所以首先我们应该有一个存储结构 <code>queue_num</code> ，存储遍历过程中找到的最大值。在遍历一个新的元素时，我们要从尾部往头部比较，把小于这个元素的值移出存储结构。<br><br>同时，有个问题就是，当滑动窗口移动时，我们怎么判断 <code>queue_num</code> 中的元素已经不在滑动窗口中，应该移除。因此我们对于 <code>queue_num</code> 中的元素，我们要使用一个存储结构 <code>queue</code> 保存其下标，当下标不在滑动窗口时，应该移除 <code>queue_num</code> 中的元素。<br><br>同时，因为我们已经在 <code>queue</code> 中保存了元素的下标，同时其排序与 <code>queue_num</code> 中是一一对应的。所以我们可以不使用 <code>queue_num</code> 存储结构，而是通过 <code>queue</code> 和 <code>nums</code> 数组本身找到对应的最大值。<br></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">maxSlidingWindow</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">k</span>: <span class="type">Int</span>) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> queue <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>k &#123;</span><br><span class="line">            <span class="keyword">while</span> <span class="operator">!</span>queue.isEmpty <span class="operator">&amp;&amp;</span> nums[queue.last<span class="operator">!</span>] <span class="operator">&lt;=</span> nums[i] &#123;</span><br><span class="line">                queue.removeLast()</span><br><span class="line">            &#125;</span><br><span class="line">            queue.append(i)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ans.append(nums[queue.first<span class="operator">!</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> k<span class="operator">..&lt;</span>nums.count &#123;</span><br><span class="line">            <span class="keyword">while</span> <span class="operator">!</span>queue.isEmpty <span class="operator">&amp;&amp;</span> nums[queue.last<span class="operator">!</span>] <span class="operator">&lt;=</span> nums[i] &#123;</span><br><span class="line">                queue.removeLast()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> <span class="operator">!</span>queue.isEmpty <span class="operator">&amp;&amp;</span> queue.first<span class="operator">!</span> <span class="operator">&lt;</span> i <span class="operator">-</span> k <span class="operator">+</span> <span class="number">1</span> &#123;</span><br><span class="line">                queue.removeFirst()</span><br><span class="line">            &#125;</span><br><span class="line">            queue.append(i)</span><br><span class="line">            ans.append(nums[queue.first<span class="operator">!</span>])</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="76">最小覆盖子串</h1>

<p>LeetCode 76. 最小覆盖子串<br></p>
<h2 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h2><p>给你一个字符串 s 、一个字符串 t 。返回 s 中涵盖 t 所有字符的最小子串。如果 s 中不存在涵盖 t 所有字符的子串，则返回空字符串 “” 。<br></p>
<h2 id="解题思考-2"><a href="#解题思考-2" class="headerlink" title="解题思考"></a>解题思考</h2><p>找子串的第一个思路，遍历字符串，找出以元素作为子串开头的子串集。<br><br>题目要求的是最小子串，因此我们只需要找到以每个元素作为开头的第一个子串。<br><br>怎么判断子串是我们要找的呢。我们先给 t 字符串创建一个哈希表，记录 t 中出现的字母及次数。接着在找子串时通过这个哈希表对比。<br><br>我们在建立哈希表时，如果是 t 中存在的字符串，我们就在哈希表对应的字母下 <code>+ 1</code> ,如果是子串中存在的字符串我们就是在对应的字母下 <code>- 1</code> 。很明显，我们并不关心不在 t 中出现的字母的情况，因此在找子串时，如果出现的字母没有在 t 中出现，我们之间跳过处理。很明显，最小子串如果存在，一定是以 t 中存在的字母作为开头和结尾的字母。<br><br>我们使用一个变量 <code>diff</code> 记录子串和 t 的差值。因为允许子串中的对应字母数量大于 t 中的数量，因此只有当哈希表中字母的数量在大于零时 <code>-1</code> ，我们才 <code>diff -= 1</code> ，当字母的数量在等于零时 <code>+1</code> ，我们才 <code>diff += 1</code> 。当 <code>diff == 0</code> 时，表示我们找到了子串。<br><br>我们可以使用两个指针，一个指向子串开头，一个指向子串结尾。当 <code>diff != 0</code> 时移动尾指针， 当 <code>diff == 0</code> 时记录子串，然后移动头指针。存在一种情况，当 <code>diff != 0 &amp;&amp; right &gt;= s.count</code> 时，这个时候，在剩下的子串中，已经不可能出现 <code>diff == 0</code> 的情况，所以我们就可以中断查找。<br></p>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">minWindow</span>(<span class="keyword">_</span> <span class="params">s</span>: <span class="type">String</span>, <span class="keyword">_</span> <span class="params">t</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> sArray <span class="operator">=</span> <span class="type">Array</span>(s)</span><br><span class="line">        <span class="keyword">var</span> count <span class="operator">=</span> sArray.count</span><br><span class="line">        <span class="keyword">var</span> len <span class="operator">=</span> <span class="type">Int</span>.max</span><br><span class="line">        <span class="keyword">var</span> begin <span class="operator">=</span> <span class="operator">-</span><span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> end <span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>    <span class="comment">//end 指向子串末尾元素的下一位置</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> map <span class="operator">=</span> [<span class="type">Character</span>: <span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">var</span> diff <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> t &#123;</span><br><span class="line">            map[c] <span class="operator">=</span> (map[c] <span class="operator">??</span> <span class="number">0</span>) <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">            diff <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> left <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> right <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> left <span class="operator">&lt;</span> count <span class="operator">||</span> right <span class="operator">&lt;</span> count &#123;</span><br><span class="line">            <span class="keyword">while</span> diff <span class="operator">!=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> right <span class="operator">&lt;</span> count &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> num <span class="operator">=</span> map[sArray[right]] &#123;</span><br><span class="line">                    <span class="keyword">if</span> num <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                        diff <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    map[sArray[right]] <span class="operator">=</span> num <span class="operator">-</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">                right <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> diff <span class="operator">==</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> left <span class="operator">&lt;</span> count &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> num <span class="operator">=</span> map[sArray[left]] &#123;</span><br><span class="line">                    <span class="keyword">if</span> diff <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> right <span class="operator">-</span> left <span class="operator">&lt;</span> len &#123;</span><br><span class="line">                            begin <span class="operator">=</span> left</span><br><span class="line">                            end <span class="operator">=</span> right</span><br><span class="line">                            len <span class="operator">=</span> end <span class="operator">-</span> begin</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> num <span class="operator">&gt;=</span> <span class="number">0</span> &#123;</span><br><span class="line">                        diff <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    map[sArray[left]] <span class="operator">=</span> num <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">                left <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> diff <span class="operator">!=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> right <span class="operator">&gt;=</span> count &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> begin <span class="operator">==</span> <span class="operator">-</span><span class="number">1</span> <span class="operator">?</span> <span class="string">&quot;&quot;</span> : <span class="type">String</span>(sArray[begin<span class="operator">..&lt;</span>end])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/30/Swift-Algorithm-4-Substring/" data-id="clwsttbfo00005gqefkeh7fa5" data-title="Swift 算法-4-子串" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Swift-Algorithm-3-SlidingWindow" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/28/Swift-Algorithm-3-SlidingWindow/" class="article-date">
  <time class="dt-published" datetime="2024-05-28T02:23:46.000Z" itemprop="datePublished">2024-05-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/28/Swift-Algorithm-3-SlidingWindow/">Swift 算法-3-滑动窗口</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#3">无重复字符的最长子串</a><br><a href="#438">找到字符串中所有字母异位词</a></p>
<h1 id="0">前言</h1>

<p>本文题目来源 LeetCode ，主要用于记录笔者的一些解题思路和思考。<br><br>本文的主题是滑动窗口。<br></p>
<h1 id="3">无重复字符的最长子串</h1>

<p>LeetCode 3. 无重复字符的最长子串<br></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给定一个字符串 s ，请你找出其中不含有重复字符的 最长子串的长度。<br></p>
<h2 id="解题思考"><a href="#解题思考" class="headerlink" title="解题思考"></a>解题思考</h2><p>使用一个滑动窗口[left, right]。右移 right 指针遍历字符串，使用哈希表记录字母的下标。当遇到重复字母时，判断前一个位置 prev 是否在滑动窗口中，如果是，移动 left 指针到 prev + 1 。<br><br>遍历过程中实时更新滑动窗口长度和最长子串长度。<br></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">lengthOfLongestSubstring</span>(<span class="keyword">_</span> <span class="params">s</span>: <span class="type">String</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> hashTable <span class="operator">=</span> [<span class="type">Character</span>: <span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">var</span> maxLen <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> left <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (i, c) <span class="keyword">in</span> s.enumerated() &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> index <span class="operator">=</span> hashTable[c] &#123;</span><br><span class="line">                left <span class="operator">=</span> <span class="built_in">max</span>(left, index <span class="operator">+</span> <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            maxLen <span class="operator">=</span> <span class="built_in">max</span>(maxLen, i <span class="operator">-</span> left <span class="operator">+</span> <span class="number">1</span>)</span><br><span class="line">            hashTable[c] <span class="operator">=</span> i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxLen</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="438">找到字符串中所有字母异位词</h1>

<p>LeetCode 438. 找到字符串中所有字母异位词<br></p>
<h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p>给定两个字符串 s 和 p，找到 s 中所有 p 的 异位词 的子串，返回这些子串的起始索引。不考虑答案输出的顺序。<br><br>异位词 指由相同字母重排列形成的字符串（包括相同的字符串）。<br></p>
<h2 id="解题思考-1"><a href="#解题思考-1" class="headerlink" title="解题思考"></a>解题思考</h2><p>字符串 p 的长度 pLen 是固定的，所以就是遍历字符串 s ，取出其中长度为 pLen 的子串判断与字符串 p 是不是字母异位词。这就相当于一个定长的滑动窗口。<br><br>重点是如何判断字母异位词。<br><br>在之前哈希题目中，我们判断字母异位词的方法是将字符串排序，字典序一致的是字母异位词。<br><br>但是在这道题中，如果我们每次都截取出子串再排序，未免有些繁琐，并且每个子串直接存在很大的重叠部分，多了很多重复排序。<br><br>因此我们使用一个结构，存储字符串 p 中的字母种类和对应数量。同时使用另一个结构存储字符串 s 中的滑动窗口中的字母种类和对应数量。然后判断是否一致。<br><br>对于上述判断，我们可以使用做差法。字符串 p 中每个字母以 -1 累计。字符串 s 的滑动窗口中每个字母以 +1 累计，移除滑动窗口则 -1 ，移入滑动窗口则 +1 。这样子就将两个结构合并，并且直接累计所有字母种类的差值是否等于零即可以判断是否是字母异位词。<br></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">findAnagrams</span>(<span class="keyword">_</span> <span class="params">s</span>: <span class="type">String</span>, <span class="keyword">_</span> <span class="params">p</span>: <span class="type">String</span>) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> asciiA <span class="operator">=</span> <span class="type">Int</span>(<span class="type">Character</span>(<span class="string">&quot;a&quot;</span>).asciiValue<span class="operator">!</span>)</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">let</span> sArray <span class="operator">=</span> s.unicodeScalars.map(&#123;<span class="type">Int</span>(<span class="variable">$0</span>.value) <span class="operator">-</span> asciiA&#125;)</span><br><span class="line">        <span class="keyword">let</span> pArray <span class="operator">=</span> p.unicodeScalars.map(&#123;<span class="type">Int</span>(<span class="variable">$0</span>.value) <span class="operator">-</span> asciiA&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> sCount <span class="operator">=</span> sArray.count</span><br><span class="line">        <span class="keyword">let</span> pCount <span class="operator">=</span> pArray.count</span><br><span class="line">        <span class="keyword">guard</span> sCount <span class="operator">&gt;=</span> pCount <span class="keyword">else</span> &#123; <span class="keyword">return</span> ans &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> count <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: <span class="number">26</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>pCount &#123;</span><br><span class="line">            count[sArray[i]] <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            count[pArray[i]] <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> diff <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        count.forEach(&#123;diff <span class="operator">+=</span> <span class="built_in">abs</span>(<span class="variable">$0</span>)&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> diff <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">            ans.append(<span class="number">0</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> pCount<span class="operator">..&lt;</span>sCount &#123;</span><br><span class="line">            <span class="keyword">if</span> count[sArray[i <span class="operator">-</span> pCount]] <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                diff <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                diff <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            count[sArray[i <span class="operator">-</span> pCount]] <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> count[sArray[i]] <span class="operator">&lt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                diff <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                diff <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            count[sArray[i]] <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> diff <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">                ans.append(i <span class="operator">-</span> pCount <span class="operator">+</span> <span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/28/Swift-Algorithm-3-SlidingWindow/" data-id="clwpulq01000h6wqe8436c63a" data-title="Swift 算法-3-滑动窗口" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Swift-Algorithm-2-DoublePointer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/25/Swift-Algorithm-2-DoublePointer/" class="article-date">
  <time class="dt-published" datetime="2024-05-25T10:19:14.000Z" itemprop="datePublished">2024-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/25/Swift-Algorithm-2-DoublePointer/">Swift 算法-2-双指针</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#283">移动零</a><br><a href="#11">盛最多水的容器</a><br><a href="#15">三数之和</a><br><a href="#42">接雨水</a></p>
<h1 id="0">前言</h1>

<p>本文题目来源 LeetCode ，主要用于记录笔者的一些解题思路和思考。<br><br>本文的主题是双指针。<br></p>
<h1 id="283">移动零</h1>

<p>LeetCode 283. 移动零<br></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给定一个数组 nums，编写一个函数将所有 0 移动到数组的末尾，同时保持非零元素的相对顺序。<br><br>请注意 ，必须在不复制数组的情况下原地对数组进行操作。<br></p>
<h2 id="解题思考"><a href="#解题思考" class="headerlink" title="解题思考"></a>解题思考</h2><p>最直接的思路，遍历数组，遇到 0 时，使用冒泡法将 0 交换到数组末尾。使用冒泡是为了保存非零元素的相对顺序。<br><br>但是上述的时间复杂度是 O($n^2$)。<br><br>事实上，我们可以先找到数组中第一个 0 的位置，然后使用指针 1 指向零区间的头部，使用指针 2 指向零区间之后的第一个位置，表示零区间的尾部。这样子我们就形成了一个零区间。<br><br>然后从零区间尾部开始遍历。当找到 0 时，纳入零区间。当找到非零值时，将其与零区域的第一个元素交换，也就等价于移动零区间。<br></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">moveZeroes</span>(<span class="keyword">_</span> <span class="params">nums</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">        <span class="keyword">var</span> zeroBegin <span class="operator">=</span> nums.firstIndex(of: <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">var</span> zeroBegin <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> (zeroBegin <span class="operator">+</span> <span class="number">1</span>)<span class="operator">..&lt;</span>nums.count &#123;</span><br><span class="line">            <span class="keyword">if</span> nums[i] <span class="operator">!=</span> <span class="number">0</span> &#123;</span><br><span class="line">                nums.swapAt(zeroBegin, i)</span><br><span class="line">                zeroBegin <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="11">盛最多水的容器</h1>

<p>LeetCode 11. 盛最多水的容器<br></p>
<h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p>给定一个长度为 n 的整数数组 height 。有 n 条垂线，第 i 条线的两个端点是 (i, 0) 和 (i, height[i]) 。<br><br>找出其中的两条线，使得它们与 x 轴共同构成的容器可以容纳最多的水。<br><br>返回容器可以储存的最大水量。<br><br>说明：你不能倾斜容器。<br><br>示例图如下：<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405271346208.png"></p>
<h2 id="解题思考-1"><a href="#解题思考-1" class="headerlink" title="解题思考"></a>解题思考</h2><p>使用一个变量 maxArea 存储可能的最大水量。<br><br>第一个可能的最大水量的第0条线 left 和最后一条线 right 组成的区域。最大水量公式是<br><br>$$maxArea &#x3D; min(height[left], height[right]) * (right - left)$$<br><br>之后，不管是移动左指针还是移动右指针，其底边总是在缩短，所以最大水量如果能更大，只能是高在增大。<br><br>对于高而已，受到 height[left] 和 height[right] 其中更小值的制约。所以是移动指向更小值的那个指针。<br></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">maxArea</span>(<span class="keyword">_</span> <span class="params">height</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> left <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> right <span class="operator">=</span> height.count <span class="operator">-</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> maxArea <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> left <span class="operator">&lt;</span> right &#123;</span><br><span class="line">            <span class="keyword">let</span> curArea <span class="operator">=</span> <span class="built_in">min</span>(height[left], height[right]) <span class="operator">*</span> (right <span class="operator">-</span> left)</span><br><span class="line">            maxArea <span class="operator">=</span> <span class="built_in">max</span>(curArea, maxArea)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> height[left] <span class="operator">&lt;</span> height [right] &#123;</span><br><span class="line">                left <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                right <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxArea</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="15">三数之和</h1>

<p>LeetCode 15. 三数之和<br></p>
<h2 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h2><p>给你一个整数数组 nums ，判断是否存在三元组 [nums[i], nums[j], nums[k]] 满足 i !&#x3D; j、i !&#x3D; k 且 j !&#x3D; k ，同时还满足 nums[i] + nums[j] + nums[k] &#x3D;&#x3D; 0 。请<br><br>你返回所有和为 0 且不重复的三元组。<br><br>注意：答案中不可以包含重复的三元组。<br></p>
<h2 id="解题思考-2"><a href="#解题思考-2" class="headerlink" title="解题思考"></a>解题思考</h2><p>寻找三元组，先固定一个 i， 问题就可以简化为两数之和问题。但是，这儿的两数之和需要找出所有的可能性。<br><br>使用双指针 + 排序。首先对数组做递增排序。然后使用双指针，一个 left ， 一个 right 。如果 $nums[left] + nums[right] + nums[i] &#x3D;&#x3D; 0$ ，则找到一个三元组。如果 $&gt;0$ ，则 $right -&#x3D; 1$ ，如果 $&lt;0$ ，则 $left +&#x3D; 1$ 。<br><br>同时，题目要求不能包含重复的三元组，因此 $+&#x3D; 1$ 一类的操作都要换成找到下一个不重复的元素。<br><br>同时，数组已经是递增的了，有一个优化操作，当 n</p>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">threeSum</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; [[<span class="type">Int</span>]] &#123;</span><br><span class="line">        <span class="keyword">var</span> ans <span class="operator">=</span> [[<span class="type">Int</span>]]()</span><br><span class="line">        <span class="keyword">let</span> nums_sorted <span class="operator">=</span> nums.sorted()</span><br><span class="line">        <span class="keyword">var</span> count <span class="operator">=</span> nums_sorted.count</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>count <span class="operator">-</span> <span class="number">2</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> i <span class="operator">==</span> <span class="number">0</span> <span class="operator">||</span> nums_sorted[i] <span class="operator">!=</span> nums_sorted[i <span class="operator">-</span> <span class="number">1</span>] &#123;</span><br><span class="line">                <span class="keyword">var</span> left <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                <span class="keyword">var</span> right <span class="operator">=</span> count <span class="operator">-</span> <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> left <span class="operator">&lt;</span> right &#123;</span><br><span class="line">                    <span class="keyword">let</span> sum <span class="operator">=</span> nums_sorted[i] <span class="operator">+</span> nums_sorted[left] <span class="operator">+</span> nums_sorted[right]</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> sum <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">                        ans.append([nums_sorted[i], nums_sorted[left], nums_sorted[right]])</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">repeat</span> &#123;</span><br><span class="line">                            left <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                        &#125; <span class="keyword">while</span> left <span class="operator">&lt;</span> right <span class="operator">&amp;&amp;</span> nums_sorted[left] <span class="operator">==</span> nums_sorted[left <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">                        <span class="keyword">repeat</span> &#123;</span><br><span class="line">                            right <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                        &#125; <span class="keyword">while</span> left <span class="operator">&lt;</span> right <span class="operator">&amp;&amp;</span> nums_sorted[right] <span class="operator">==</span> nums_sorted[right <span class="operator">+</span> <span class="number">1</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> sum <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">                        <span class="keyword">repeat</span> &#123;</span><br><span class="line">                            right <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                        &#125; <span class="keyword">while</span> left <span class="operator">&lt;</span> right <span class="operator">&amp;&amp;</span> nums_sorted[right] <span class="operator">==</span> nums_sorted[right <span class="operator">+</span> <span class="number">1</span>]</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">repeat</span> &#123;</span><br><span class="line">                            left <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                        &#125; <span class="keyword">while</span> left <span class="operator">&lt;</span> right <span class="operator">&amp;&amp;</span> nums_sorted[left] <span class="operator">==</span> nums_sorted[left <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="42">接雨水</h1>

<p>LeetCode 42. 接雨水<br></p>
<h2 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h2><p>给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。<br><br>示例图如下：<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405271426890.png"></p>
<h2 id="解题思考-3"><a href="#解题思考-3" class="headerlink" title="解题思考"></a>解题思考</h2><p>使用双指针 left 和 right 。因为容量的限制因素是 $min(height[left], height[right])$ ，因此移动指向较小值的指针。<br><br>保存一个 leftMax 和 rightMax ，如果 $height[left] &lt; height[right]$ , 则必有 $leftMax &lt; rightMax$ ,那么 left 处可以存储的雨水量为 $leftMax - height[left]$，反之必然。因为我们移动指向较小值的指针。<br><br>同时使用 height[left] 和 height[right] 去更新 leftMax 和 rightMax 。<br></p>
<h2 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">trap</span>(<span class="keyword">_</span> <span class="params">height</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> height.isEmpty &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</span><br><span class="line">        <span class="keyword">var</span> left <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> right <span class="operator">=</span> height.count <span class="operator">-</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> leftMax <span class="operator">=</span> height[left]</span><br><span class="line">        <span class="keyword">var</span> rightMax <span class="operator">=</span> height[right]</span><br><span class="line">        <span class="keyword">var</span> capcity <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> left <span class="operator">&lt;</span> right &#123;</span><br><span class="line">            <span class="keyword">if</span> height[left] <span class="operator">&lt;</span> height[right] &#123;</span><br><span class="line">                capcity <span class="operator">+=</span> leftMax <span class="operator">-</span> height[left]</span><br><span class="line">                left <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                leftMax <span class="operator">=</span> <span class="built_in">max</span>(leftMax, height[left])</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                capcity <span class="operator">+=</span> rightMax <span class="operator">-</span> height[right]</span><br><span class="line">                right <span class="operator">-=</span> <span class="number">1</span></span><br><span class="line">                rightMax <span class="operator">=</span> <span class="built_in">max</span>(rightMax, height[right])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> capcity</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="解法拓展"><a href="#解法拓展" class="headerlink" title="解法拓展"></a>解法拓展</h2><p>本题还可以使用动态规划来实现。从双指针的解法来看，下标 i 处可以存储的雨水量取决于 i 处临近的左右两边最大值中的最小值。<br><br>我们可以使用两个数组 leftMax 和 rightMax 分别存储下标 i 处的左边最大值和右边最大值。<br><br>在建立 leftMax 和 rightMax 时就可以使用动态规划来。<br></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">trap</span>(<span class="keyword">_</span> <span class="params">height</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> height.isEmpty &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> leftMax <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: height.count)</span><br><span class="line">        leftMax[<span class="number">0</span>] <span class="operator">=</span> height[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span><span class="operator">..&lt;</span>height.count &#123;</span><br><span class="line">            leftMax[i] <span class="operator">=</span> <span class="built_in">max</span>(height[i], leftMax[i <span class="operator">-</span> <span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> rightMax <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0</span>, count: height.count)</span><br><span class="line">        rightMax[rightMax.count <span class="operator">-</span> <span class="number">1</span>] <span class="operator">=</span> height[height.count <span class="operator">-</span> <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">stride</span>(from: height.count <span class="operator">-</span> <span class="number">2</span>, through: <span class="number">0</span>, by: <span class="operator">-</span><span class="number">1</span>) &#123;</span><br><span class="line">            rightMax[i] <span class="operator">=</span> <span class="built_in">max</span>(height[i], rightMax[i <span class="operator">+</span> <span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> capcity <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>height.count &#123;</span><br><span class="line">            capcity <span class="operator">+=</span> <span class="built_in">min</span>(leftMax[i], rightMax[i]) <span class="operator">-</span> height[i]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> capcity</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/25/Swift-Algorithm-2-DoublePointer/" data-id="clwpulq01000f6wqeed34d74k" data-title="Swift 算法-2-双指针" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Swift-Algorithm-1-Hash" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/23/Swift-Algorithm-1-Hash/" class="article-date">
  <time class="dt-published" datetime="2024-05-23T03:01:33.000Z" itemprop="datePublished">2024-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/23/Swift-Algorithm-1-Hash/">Swift 算法-1-哈希</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#1">两数之和</a><br><a href="#49">字母异位词分组</a><br><a href="#128">最长连续序列</a></p>
<h1 id="0">前言</h1>

<p>本文题目来源 LeetCode ，主要用于记录笔者的一些解题思路和思考。<br><br>本文的主题是哈希。<br></p>
<h1 id="1">两数之和</h1>

<p>LeetCode 1. 两数之和<br></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给定一个整数数组 nums 和一个整数目标值 target，请你在该数组中找出 和为目标值 target  的那 两个 整数，并返回它们的数组下标。<br><br>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。<br><br>你可以按任意顺序返回答案。<br></p>
<h2 id="解题思考"><a href="#解题思考" class="headerlink" title="解题思考"></a>解题思考</h2><p>题目中提到了可以假定每种输入只会对应一个答案，因此我们找到答案后立即返回。<br><br>题目要求每个元素只能使用一次，但是并没有说元素的值是否会重复。不过只本题中只有前者条件是有意义的。<br><br>暴力解法，遍历数组中的所有元素 <code>x</code> ，同时遍历剩余的元素 <code>y</code> ，判断 <code>x + y == target</code> 。<br><br>优化解法，在遍历数组元素 <code>x</code> 时，查找是否存在 <code>target - y</code> 。同时在编译时将元素 <code>x</code> 与它的下标 <code>index</code> 插入哈希表保存。<br></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">twoSum</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>], <span class="keyword">_</span> <span class="params">target</span>: <span class="type">Int</span>) -&gt; [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> hashtable <span class="operator">=</span> [<span class="type">Int</span>: <span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">for</span> (i, e) <span class="keyword">in</span> nums.enumerated() &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> v <span class="operator">=</span> hashtable[target <span class="operator">-</span> e] &#123;</span><br><span class="line">                <span class="keyword">return</span> [i, v]</span><br><span class="line">            &#125;</span><br><span class="line">            hashtable[e] <span class="operator">=</span> i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="49">字母异位词分组</h1>

<p>LeetCode 49. 字母异位词分组<br></p>
<h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p>给你一个字符串数组，请你将<strong>字母异位词</strong>组合在一起。可以按任意顺序返回结果列表。<br><br>字母异位词是由重新排列源单词的所有字母得到的一个新单词。<br></p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>字母异位词指两个字符串中，字母值和数量一致。<br><br>因此我们需要考虑怎么怎么表示一组字母异位词，最简单的方法就是用字符串的字典序字符串来表示.然后使用哈希表存储，最后再转换成数组输出。<br></p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">groupAnagrams</span>(<span class="keyword">_</span> <span class="params">strs</span>: [<span class="type">String</span>]) -&gt; [[<span class="type">String</span>]] &#123;</span><br><span class="line">        <span class="keyword">var</span> hashList <span class="operator">=</span> [<span class="type">String</span>: [<span class="type">String</span>]]()</span><br><span class="line">        <span class="keyword">for</span> str <span class="keyword">in</span> strs &#123;</span><br><span class="line">            <span class="keyword">let</span> key <span class="operator">=</span> <span class="type">String</span>(str.sorted())</span><br><span class="line">            <span class="keyword">if</span> hashList[key] <span class="operator">==</span> <span class="literal">nil</span> &#123;</span><br><span class="line">                hashList[key] <span class="operator">=</span> [str]</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                hashList[key]<span class="operator">!</span>.append(str)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Array</span>(hashList.values)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="128">最长连续序列</h1>

<p>LeetCode 128. 最长连续序列<br></p>
<h2 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h2><p>给定一个未排序的整数数组 nums ，找出数字连续的最长序列（不要求序列元素在原数组中连续）的长度。<br><br>请你设计并实现时间复杂度为 O(n) 的算法解决此问题。<br></p>
<h2 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h2><p>最长序列，也就是说我们要找出数组中的连续序列，并获得其中最大的长度。<br><br>题目并没有说数组元素不重复，因此我们要先去重，最简单的就是使用 Set 。<br><br>接着，我们要在数组中找到一个序列 <code>x, x+1, x+2,x+n</code> ，则该序列长度就是 <code>n</code> 。<br><br>暴力搜索，遍历每个元素 <code>x</code> ，然后通过 <code>+1</code> 查找序列。<br>优化，因为暴力搜索会出现对序列的子序列重复查找。因此，我们先通过判断 <code>x-1</code> 是否中数组中，找到序列中的最小值，再开始查找整个序列，获取序列长度。<br></p>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">longestConsecutive</span>(<span class="keyword">_</span> <span class="params">nums</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> num_set <span class="operator">=</span> <span class="type">Set</span>&lt;<span class="type">Int</span>&gt;(nums)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> longestStreak <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> num_set &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="operator">!</span>num_set.contains(num <span class="operator">-</span> <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> currentStreak <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">                <span class="keyword">var</span> currentNum <span class="operator">=</span> num</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">while</span> num_set.contains(currentNum <span class="operator">+</span> <span class="number">1</span>) &#123;</span><br><span class="line">                    currentNum <span class="operator">=</span> currentNum <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">                    currentStreak <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                longestStreak <span class="operator">=</span> <span class="built_in">max</span>(longestStreak, currentStreak)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> longestStreak</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/23/Swift-Algorithm-1-Hash/" data-id="clwpulq00000e6wqe1azl0b8h" data-title="Swift 算法-1-哈希" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Start-with-Flutter-Ⅰ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/20/Start-with-Flutter-%E2%85%A0/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T08:55:02.000Z" itemprop="datePublished">2024-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/20/Start-with-Flutter-%E2%85%A0/">Flutter 入门指引 Ⅰ</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#1">前言</a><br><a href="#2">开发环境搭建</a><br><a href="#3">后续章节概述</a></p>
<h1 id="1">前言</h1>

<p>本文基于掘金小册<a target="_blank" rel="noopener" href="https://juejin.cn/book/7212822723330834487">《Flutter 入门教程》</a>，是笔者学习了该小册后的记录。<br><br>该记录仅作为知识记录，用于帮助笔者在日后快速回忆 Flutter 的使用。<br><br>由于该小册内容较多，笔者在此将其输出为多篇文章。本文是第一篇，主要讲述 Flutter 开发环境的搭建，以及后续文章内容的概览。<br></p>
<h1 id="2">开发环境搭建</h1>

<p>笔者的环境为 macmini 主机，系统为 macOS 13.6.4 。开发环境搭建主要遵从了 Flutter 的<a target="_blank" rel="noopener" href="https://docs.flutter.dev/get-started/install">指南</a>。目前笔者使用的开发环境是 MacOS 下的 iOS 开发环境和 Android 环境，Flutter 版本为 stable 渠道的 3.19.6 。<br>本文默认使用的 sheel为 zsh 。<br></p>
<h2 id="iOS-环境"><a href="#iOS-环境" class="headerlink" title="iOS 环境"></a>iOS 环境</h2><h4 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h4><p>下载并安装 Xcode 15 和 CocoaPods 1.13 。在安装 Xcode 时一般会同步安装 Git 2.27 或更高版本，如果没有请手动安装。<br><br>安装 Xcode 后最好打开并运行一个简单的程序，以使你安装相关的需要，如果真的有的话。<br><br>安装 CocoaPods 很简单，运行下述语句即可:<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure>
<p>安装完成之后最好设置一下环境变量：<br></p>
<ul>
<li>打开 zsh 环境变量文件：  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.zshenv</span><br></pre></td></tr></table></figure></li>
<li>在末尾添加下述语句：  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$HOME/.gem/bin:$PATH</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h4><p>笔者选用的是 VS Code 。<br><br>在 VS Code 中增加扩展 <strong>Flutter</strong> 。当你安装该扩展时，会默认帮你一起安装 <strong>Dart</strong> 扩展，如果没有请手动安装。<br></p>
<h4 id="Flutter-SDK"><a href="#Flutter-SDK" class="headerlink" title="Flutter SDK"></a>Flutter SDK</h4><ol>
<li>在 VS Code 中打开命令面板（Command + shift + P）</li>
<li>输入 flutter ，选择 Flutter: New Project</li>
</ol>
<p>这时 VS Code 会提醒在本地找到 Flutter SDK ，你可以选择 <strong>Download SDK</strong> ，下载 SDK 到你想要保存到目录下。<br><br>下载完成时会提示你是否添加 Flutter SDK 到环境变量中，请最好选择是。<br><br>重启 VS Code 你就能看到 Flutter SDK 已经准备就绪。<br></p>
<h5 id="配置-Xcode"><a href="#配置-Xcode" class="headerlink" title="配置 Xcode"></a>配置 Xcode</h5><p>签署 Xcode 许可协议：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcodebuild -license</span><br></pre></td></tr></table></figure>
<p>现在，你可以在 iOS 模拟器或真机上运行 Flutter 项目了。<br></p>
<h2 id="安卓环境"><a href="#安卓环境" class="headerlink" title="安卓环境"></a>安卓环境</h2><p>安卓环境是在上述 iOS 环境搭建的基础上继续添加。<br></p>
<h4 id="开发工具-1"><a href="#开发工具-1" class="headerlink" title="开发工具"></a>开发工具</h4><p>下载并安装 Android Studio。启动 Android Studio 并安装提示操作。<br><br>确保安装以下组件，如果在初始指引中没有安装的，可以后续在 Android Studio 中继续安装：<br></p>
<ul>
<li>Android SDK Platform, API 34.0.0</li>
<li>Android SDK Command-line Tools</li>
<li>Android SDK Build-Tools</li>
<li>Android SDK Platform-Tools</li>
<li>Android Emulator</li>
</ul>
<h4 id="配置-Android"><a href="#配置-Android" class="headerlink" title="配置 Android"></a>配置 Android</h4><p>运行以下指令启用签名许可证：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor --android-licenses</span><br></pre></td></tr></table></figure>
<h2 id="故障排查"><a href="#故障排查" class="headerlink" title="故障排查"></a>故障排查</h2><p>在终端运行如下指令：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor</span><br></pre></td></tr></table></figure>
<p>指令结果应该如下：<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405201921882.png"></p>
<h4 id="替换-maven-访问源"><a href="#替换-maven-访问源" class="headerlink" title="替换 maven 访问源"></a>替换 maven 访问源</h4><p>在国内访问 maven 总是很困难，所以最好是将 maven 的访问源换成国内镜像。<br></p>
<ol>
<li>打开 Flutter 的安装目录&#x2F;packages&#x2F;flutter_tools&#x2F;lib&#x2F;src&#x2F; 下的 http_host_validator.dart 文件。<br><br> <img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405201925547.png"></li>
<li>将其中 maven 的访问源改为你喜欢的国内镜像源，笔者使用的是国内阿里云的源：<br><br> <img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405201927774.png"></li>
<li>删除 flutter 安装目录&#x2F;bin&#x2F;cache 文件夹</li>
<li>再次执行 flutter doctor</li>
</ol>
<p>事实上，除了 maven ，gradle 的访问也比较麻烦，但好在它只需要挂一下香港的网络节点一般都可以访问。<br></p>
<h1 id="3">后续章节概述</h1>

<p>对于开发环境的搭建就讲到这了，后面会直接开始 Flutter 项目实践，需要读者至少有 Dart 语言的基础，可以去<a href="https://illusorycat.github.io/2024/05/20/Dart-brief/">此处</a>了解。<br><br>接下来的文章会分别讲述三个小项目，猜数字、电子木鱼以及白板绘制。在完成这三个项目后，我们还会将这三个项目结合起来，简单讲述一些进阶内容，比如数据持久化、网络交互等。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/20/Start-with-Flutter-%E2%85%A0/" data-id="clwpulq00000b6wqehejodjan" data-title="Flutter 入门指引 Ⅰ" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E4%BA%BA%E7%94%9F/" rel="tag">代码人生</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Dart-brief" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/20/Dart-brief/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T01:25:31.000Z" itemprop="datePublished">2024-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/20/Dart-brief/">Dart 简述</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#0">前言</a><br><a href="#1">基础表达式</a><br><a href="#2">类型</a><br><a href="#3">模式匹配</a><br><a href="#4">函数方法</a><br><a href="#5">控制流</a><br><a href="#6">错误处理</a><br><a href="#7">类 &amp; 对象</a><br><a href="#8">类修饰符</a><br><a href="#9">并发</a><br><a href="#10">空安全</a></p>
<h1 id = "0">前言</h1>

<p>本文简单整理了来自 <a target="_blank" rel="noopener" href="https://dart.cn/language">Dart 官网的《 Dart 开发语言 》</a>章节内容。仅用于简单理解 Dart 的语法。<br></p>
<h1 id="1">基础表达式</h1>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>以下是创建并初始化变量的例子：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;Bob&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>使用 <code>var</code> 定义了一个变量，并且通过初始化赋值触发类型推导确定变量的类型。<br><br>如果你明确变量的类型，也可以直接用具体类型替换 <code>var</code> 。<br><br>Dart 支持空值。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> name    <span class="comment">//Nullable type. Can be `null` or string</span></span><br><span class="line"><span class="built_in">String</span> name     <span class="comment">//Non-nullable type.</span></span><br></pre></td></tr></table></figure>
<p>你必须在使用变量之前对其进行初始化，Dart 不会为非可空类型设置默认初始值。而可空变量是默认初始化为 null 的。也就是说对于非可空类型变量，在声明时要提供一个默认初始值。<br><br>Dart 中的非可空变量类型都继承于 Object ，因此你可以使用 <code>Object</code> 类型来定义一个可以存储任意非可空类型数据的变量。<br><br>如果你必须推迟变量的类型检测到运行时，那你可以使用特殊类型 <code>dynamic</code> 。<br><br>Dart 提供了一个关键字 <code>late</code> 。该关键字允许你声明非可空类型变量时不初始化，支持在第一次使用到该变量时才执行初始化流程。<br><br>如果你不打算更改一个变量，可以使用 <code>final</code> 或 <code>const</code> 。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> name = <span class="string">&#x27;Bob&#x27;</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> nickname = <span class="string">&#x27;Bobby&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">const</span> [];</span><br><span class="line"><span class="keyword">final</span> bar = <span class="keyword">const</span> [];</span><br><span class="line"><span class="keyword">const</span> baz = [];</span><br></pre></td></tr></table></figure>
<p>final 对象不能被修改，但是其字段可能可以被修改。 const 对象本身及其内容不能被更改。<br>你可以在定义常量时使用类型检查 <code>is</code> 和转换 <code>as</code> 、集合中的 <code>if</code> 和展开操作符 (<code>...</code> 和 <code>...?</code>) 。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object i = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> list = [i <span class="keyword">as</span> <span class="built_in">int</span>];</span><br><span class="line"><span class="keyword">const</span> map = &#123;<span class="keyword">if</span> (i <span class="keyword">is</span> <span class="built_in">int</span>) i: <span class="string">&#x27;int&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">set</span> = &#123;<span class="keyword">if</span> (list <span class="keyword">is</span> <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;) ...list&#125;</span><br></pre></td></tr></table></figure>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>操作符与其他语言中的大体相符。此处只介绍一些不常见的操作符。<br></p>
<ol>
<li>！<ul>
<li>作为后缀操作符，用于强调表达式的计算结果永远不会是 null</li>
<li>作为前缀操作符号，则是常见的反转值功能</li>
</ul>
</li>
<li>～&#x2F;<ul>
<li>除法，但是返回整数结果</li>
</ul>
</li>
<li>is!<ul>
<li>与 is 操作符的结果相反</li>
</ul>
</li>
<li>??&#x3D; <ul>
<li>仅在被赋值对象为 null 时进行赋值</li>
</ul>
</li>
<li><blockquote>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>无符号右移</li>
</ul>
</li>
<li>.. 和 ?.. <ul>
<li>级联操作符，用于省略调用的变量  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> paint = Paint()</span><br><span class="line">..color = Colors.black  <span class="comment">// paint.color = COlors.black</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>… 和 …?<ul>
<li>这其实不是一个运算符，而是集合本身的一部分，是一种将一个集合中的多个值插入到集合中的简洁方法  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> list2 = [<span class="number">0</span>, ...list];</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>注释的写法与常见语言中的一致。<br></p>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p>元数据注解以 <code>@</code> 开始。<br><br>所有 Dart 代码中都内置了四个注解：@Deprecated 、@deprecated 、@override 和 @pragma 。<br><br>@Deprecated 和 @deprecated 的区别在于前者可以指定消息。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated</span>(<span class="string">&#x27;Use turnOn instead&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>我们可以定义自己的注解。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> who;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> what;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> Todo(<span class="keyword">this</span>.who, <span class="keyword">this</span>.what);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Todo</span>(<span class="string">&#x27;Dash&#x27;</span>, <span class="string">&#x27;Implement this function&#x27;</span>)</span><br><span class="line"><span class="keyword">void</span> doSomething() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Do something&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="库和导库"><a href="#库和导库" class="headerlink" title="库和导库"></a>库和导库</h2><p>Dart 使用 import 关键字来导入库。<br><br>并且 Dart 没有其他语言中的那些访问权限关键字，而是仅仅使用如下规则：<br></p>
<ul>
<li>以下划线 <code>_</code> 开通的标识符仅在库中可见。</li>
</ul>
<p>下面是 Dart 中的一个导库的例子：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:html&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:test/test.dart&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>我们可以仅加载库的部分：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Import only foo.</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib1/lib1.dart&#x27;</span> <span class="keyword">show</span> foo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Import all banes EXCEPT foo.</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib2/lib2.dart&#x27;</span> <span class="keyword">hide</span> foo;</span><br></pre></td></tr></table></figure>
<p>当导入的多个库中具有冲突的标识符时，我们可以为库指定前缀：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib1/lib1.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:lib2/lib2.dart&#x27;</span> <span class="keyword">as</span> lib2;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Element</span> elememt1 = <span class="built_in">Element</span>();</span><br><span class="line">lib2.<span class="built_in">Element</span> element2 = lib2.<span class="built_in">Element</span>();</span><br></pre></td></tr></table></figure>
<p>如果你在使用 Web 相关功能，你可能会需要 Dart 延迟加载库的功能，请查阅文档。<br></p>
<h1 id="2">类型</h1>

<h2 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h2><p>Dart 中支持的基本数据类型与其他面对对象的语言类似。<br><br>值得注意的是 Dart 中的字符串的保存使用 UTF-16 。<br><br>同时它可以使用 r 前缀来输出不转义的字符串：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">r&#x27;In a raw string, not even \n gets special treatment.&#x27;</span></span><br></pre></td></tr></table></figure>
<p>同时，我们可以使用 <code>$</code> 将变量放入字符串中，也可以使用 <code>$&#123;&#125;</code> 将表达式放入字符串中：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;string interpolation&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> m = &#123;<span class="number">1</span>: <span class="string">&#x27;int&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Dart has <span class="subst">$s</span>, which is very handy.&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;m&#125;</span>&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>Dart 是类型安全语言，这也就意味着你不能不使用像 <code>if(nonbooleanValue)</code> 这样的代码。<br></p>
<h2 id="Records-类型"><a href="#Records-类型" class="headerlink" title="Records 类型"></a>Records 类型</h2><p>Records 是匿名的、不可变的聚合类型。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> record = (<span class="string">&#x27;first&#x27;</span>, a: <span class="number">2</span>, b: <span class="keyword">true</span>, <span class="string">&#x27;last&#x27;</span>);  <span class="comment">// this type is (String, int, bool, String)</span></span><br></pre></td></tr></table></figure>
<p>我们可以使用占位符或者字段描述名访问字段值：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(record.$<span class="number">1</span>);   <span class="comment">// Prints &#x27;first&#x27;   </span></span><br><span class="line"><span class="built_in">print</span>(record.a);</span><br></pre></td></tr></table></figure>
<p>Records 类型对象是不可变的，其只有 getter 字段，而没有 setting 字段。<br><br>字段描述名不影响 Records 本身的相等性。<br><br>我们可以使用模式匹配将 Records 值解构为局部局部变量：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">String</span> name, <span class="built_in">int</span> age) userInfo(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    retur (json[<span class="string">&#x27;name&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>, json[<span class="string">&#x27;age&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> json = &lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Dash&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (name, age) = userInfo(json);</span><br></pre></td></tr></table></figure>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>Dart 的集合包括 List 、Set 和 Map<br>同时支持使用 <code>...</code> 、<code>...?</code> 、 <code>if</code> 、<code>for</code> 、<code>if-case</code> 构建集合。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> list2 = [<span class="number">0</span>, ...list];</span><br><span class="line"><span class="keyword">assert</span>(list2.length == <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;? list3 = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">var</span> list4 = [<span class="number">0</span>, ...?list3];</span><br><span class="line"><span class="keyword">assert</span>(list4.length == <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nav = [<span class="string">&#x27;Home&#x27;</span>, <span class="string">&#x27;Furniture&#x27;</span>, <span class="string">&#x27;Plants&#x27;</span>, <span class="keyword">if</span> (promoActive) <span class="string">&#x27;Outlet&#x27;</span>];    <span class="comment">//if promoActive is true, this list has 4 elements, otherwise only 3 elements.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nav1 = [<span class="string">&#x27;Home&#x27;</span>, <span class="string">&#x27;Furniture&#x27;</span>, <span class="string">&#x27;Plants&#x27;</span>, <span class="keyword">if</span> (login <span class="keyword">case</span> <span class="string">&#x27;Manager&#x27;</span>) <span class="string">&#x27;Inventory&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> listOfInts = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> listOfStrings = [<span class="string">&#x27;#0&#x27;</span>, <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> listOfInts) <span class="string">&#x27;#<span class="subst">$i</span>&#x27;</span>];</span><br><span class="line"><span class="keyword">assert</span>(listOfStrings[<span class="number">1</span>] == <span class="string">&#x27;#1&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">abstrct <span class="class"><span class="keyword">class</span> <span class="title">Cache</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    T getByKey(<span class="built_in">String</span> key);</span><br><span class="line">    <span class="keyword">void</span> setByKey(<span class="built_in">String</span> key, T value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//Any type provided to Foo for T must be non-nullable</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">T first&lt;T&gt;(<span class="built_in">List</span>&lt;T&gt; ts) &#123;</span><br><span class="line">    T tmp = ts[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> IntList = <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> ListMapper&lt;X&gt; = <span class="built_in">Map</span>&lt;X, <span class="built_in">List</span>&lt;X&gt;&gt;;</span><br></pre></td></tr></table></figure>
<p>对于函数，我们推荐使用内联函数类型而不是函数等 typedef。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> Compare&lt;T&gt; = <span class="built_in">int</span> <span class="built_in">Function</span>(T a, T b);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> sort(<span class="built_in">int</span> a, <span class="built_in">int</span> b) =&gt; a - b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="keyword">assert</span>(sort <span class="keyword">is</span> Compare&lt;<span class="built_in">int</span>&gt;);   <span class="comment">//True</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="类型系统"><a href="#类型系统" class="headerlink" title="类型系统"></a>类型系统</h2><p>Dart 支持在重写方法时，使用一个新类型（在新方法中）替换旧类型（在旧方法中）。类似的，当参数传递给函数时，可以使用另一种类型（实际参数）的对象替换现有类型（具有声明类型的参数）要求的对象。从生产者和消费者的角度来看，消费者接受类型，生产者产生类型。可以使用父类型替换消费者类型，使用子类型替换生产者类型。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cat c = Cat();</span><br><span class="line">Animal a = Cat();</span><br><span class="line">Cat c2 = MaineCoon();</span><br></pre></td></tr></table></figure>
<p>赋值运算符左边是消费者，右边是生产者。<br></p>
<h1 id="3">模式匹配</h1>

<h2 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (number)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;one&#x27;</span>);</span><br><span class="line">    <span class="comment">//Matches of tje value pf pbj is between the constant values of &#x27;first&#x27; and &#x27;last&#x27;</span></span><br><span class="line">    <span class="keyword">case</span> &gt;= first &amp;&amp; &lt;= last:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;in range&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">case</span> [a,b]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$a</span>, <span class="subst">$b</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> [a, b, c] = numList;</span><br><span class="line"><span class="built_in">print</span>(a + b + c);</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面匹配了一个第一个元素是 &#x27;a&#x27; 或 &#x27;b&#x27; 的两元素列表</span></span><br><span class="line"><span class="keyword">switch</span> (list) &#123;</span><br><span class="line">    <span class="keyword">case</span> [<span class="string">&#x27;a&#x27;</span> || <span class="string">&#x27;b&#x27;</span>, <span class="keyword">var</span> c]:</span><br><span class="line">        <span class="built_in">print</span>(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总的来说，Dart 提供的模式匹配功能十分强大。<br><br>我们可以使用模式匹配很方便地实现交换两个变量的值。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (a, b) = (<span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;right&#x27;</span>);</span><br><span class="line">(b, a) = (a, b);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$a</span> <span class="subst">$b</span>&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>可以让多个 case 共享一个 body：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isPrimary = <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    Color.red || Color.yellow || Color.blue =&gt; <span class="keyword">true</span>,</span><br><span class="line">    _ =&gt; <span class="keyword">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以在 case 中增加添加：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    <span class="keyword">case</span> Square(size: <span class="keyword">var</span> s) || Circle(size: <span class="keyword">var</span> s) <span class="keyword">when</span> s&gt; <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Non-empty symmetric shape&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将 getter 调用的结果绑定到同名变量：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">int</span>&gt; hist &#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="number">23</span>,</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: <span class="number">100</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> MapEntry(:key, value: count) <span class="keyword">in</span> hist.entries) &#123;</span><br><span class="line">    <span class="comment">///</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述 <code>.entries</code> 返回的是一个 <code>Iterable&lt;MapENtry&lt;K, V&gt;&gt;</code> ，因为其字段 key 与我们要赋值的变量 key 同名，因此可以将 <code>key:key</code> 简化为 <code>:key</code> 。<br><br>我们可以使用模式将 Records 的字段直接结构为局部变量，与函数内联。也可以使用模式解构类实例。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (name, age) = userInfo(json);</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Foo myFoo = Foo(one: <span class="string">&#x27;one&#x27;</span>, tew: <span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> Foo(:one, :teo) = myFoo;</span><br></pre></td></tr></table></figure>
<p>使用模式实现函数的策略设计模式：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> length;</span><br><span class="line">    Square(<span class="keyword">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> radius;</span><br><span class="line">    Circle(<span class="keyword">this</span>. radius);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">double</span> calculateArea(Shape shape) =&gt; <span class="keyword">switch</span> (shape) &#123;</span><br><span class="line">    Square(;ength: <span class="keyword">var</span> l) =&gt; l * l,</span><br><span class="line">    Circle(radius: <span class="keyword">var</span> r) =&gt; math.pi * r * r</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>使用模式我们可以很便捷的验证并使用 json 结构中的数据：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (json <span class="keyword">case</span> &#123;<span class="string">&#x27;user&#x27;</span>: [<span class="built_in">String</span> name, <span class="built_in">int</span> age]&#125;) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;User <span class="subst">$name</span> is <span class="subst">$age</span> years old.&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="模式匹配类型"><a href="#模式匹配类型" class="headerlink" title="模式匹配类型"></a>模式匹配类型</h2><p>模式匹配与逻辑组合使用时同样有运算优先级存在。<br><br>我们还可以使用模式匹配来实现空校验或空断言：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String?</span> maybeString = <span class="string">&#x27;nullable with base type String&#x27;</span>;</span><br><span class="line"><span class="keyword">switch</span> (maybeString) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">var</span> s?:</span><br><span class="line">    <span class="comment">// &#x27;s&#x27; has type non-nullable String here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String?</span>&gt; row = [<span class="string">&#x27;user&#x27;</span>, <span class="keyword">null</span>];</span><br><span class="line"><span class="keyword">switch</span> (row) &#123;</span><br><span class="line">    <span class="keyword">case</span> [<span class="string">&#x27;user&#x27;</span>, <span class="keyword">var</span> name!]: <span class="comment">//...</span></span><br><span class="line">    <span class="comment">//&#x27;name&#x27; is a non-nullable here.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4">函数方法</h1>

<p>Dart 中的函数也是对象，类型是 <code>Function</code>。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isNoble(<span class="built_in">int</span> atomicNumber) &#123;</span><br><span class="line">    <span class="keyword">return</span> _nobleGases[atomicNumber] != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isBoble(<span class="built_in">int</span> atomicNumber) =&gt; _nobleGases[atomicNumber] != <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<p>上述第二种函数声明是第一种的简写语法，仅当函数中只包含一个表达式时可用。也就是说你不可以在 <code>=&gt;</code> 之后放一个 if 语句。<br><br><code>=&gt; expr</code> 语法是 <code>&#123; return expr; &#125;</code> 的简写。（类似于其他语言中的宏定义。<br><br>一个函数可以有任意数量的普通参数。这些参数后面可以跟着命名参数和位置参数（但不能同时跟着这两个参数）。<br><br>函数命名参数和位置参数都可以指定默认值，但必须是编译时常量。普通参数不能指定默认值。<br></p>
<h2 id="命名参数"><a href="#命名参数" class="headerlink" title="命名参数"></a>命名参数</h2><p>定义函数时，使用 <code>&#123;param1, param2, ...&#125;</code> 指定命名参数。如果你没有<strong>提供默认值</strong>或将命名参数标记为 <code>required</code>,则它们类型必须是可空的，因为 Dart 提供的默认值是 null。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> enableFlags(<span class="built_in">int</span> a, &#123;<span class="built_in">bool?</span> bold, <span class="built_in">bool</span> hidden = <span class="keyword">false</span>, <span class="keyword">required</span> Widget child&#125;) &#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>命名参数指这些参数必须通过命名来传递。<br></p>
<h2 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h2><p>定义函数时，使用 <code>[param1, param2, ...]</code> 指定位置参数。如果不提供默认值，则它们的参数类型必须是可空的。<br><br>位置参数要求传参时安装定义的顺序传递入参。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> say(<span class="built_in">String</span> from, <span class="built_in">String</span> msg, [<span class="built_in">String?</span> device]) &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">&#x27;<span class="subst">$from</span> says <span class="subst">$msg</span>&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (deivce != <span class="keyword">null</span>) &#123;</span><br><span class="line">        result = <span class="string">&#x27;<span class="subst">$result</span> with a <span class="subst">$device</span>&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="main-函数"><a href="#main-函数" class="headerlink" title="main 函数"></a>main 函数</h2><p>main 作为 flutter 应用程序的入口点。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数闭包"><a href="#函数闭包" class="headerlink" title="函数闭包"></a>函数闭包</h2><p>Dart 支持函数闭包。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">int</span> addBy) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">int</span> i) =&gt; addBy + i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> add2 = makeAdder(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span>(add2(<span class="number">3</span>) == <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Dart 闭包访问的是其词法作用域中的变量。如果原变量的值在被捕捉之后发生了变化，也不会影响 Dart 闭包中已经捕捉的值。<br></p>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><p>当你需要延迟产生一个值序列时，可以考虑使用生成器函数。Dart 内置支持两种生成器函数：<br></p>
<ul>
<li>同步生成器：返回一个 Iterable 对象</li>
<li>异步生成器：返回一个 Stream 对象</li>
</ul>
<h4 id="实现同步生成器"><a href="#实现同步生成器" class="headerlink" title="实现同步生成器"></a>实现同步生成器</h4><p>使用 <code>sync*</code> 标记函数，并使用 <code>yield</code> 语句来传递值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsTo(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">    <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; n) <span class="keyword">yield</span> k++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实现异步生成器"><a href="#实现异步生成器" class="headerlink" title="实现异步生成器"></a>实现异步生成器</h4><p>使用 <code>async*</code> 标记函数，并使用 <code>yield</code> 语句传递值。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;<span class="built_in">int</span>&gt; asynchronousNaturalsTo(<span class="built_in">int</span> n) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="built_in">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; n) <span class="keyword">yield</span> k++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用-yield-提高递归生成器函数的性能"><a href="#使用-yield-提高递归生成器函数的性能" class="headerlink" title="使用 yield* 提高递归生成器函数的性能"></a>使用 <code>yield*</code> 提高递归生成器函数的性能</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Iterable</span>&lt;<span class="built_in">int</span>&gt; naturalsDownFrom(<span class="built_in">int</span> n) <span class="keyword">sync</span>* &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> n;</span><br><span class="line">        <span class="keyword">yield</span>* naturalsDownFrom(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="外部函数"><a href="#外部函数" class="headerlink" title="外部函数"></a>外部函数</h3><p>外部函数是其主体与其声明分开实现的函数。使用 <code>external</code> 关键字。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">external</span> <span class="keyword">void</span> someFunc(<span class="built_in">int</span> i);</span><br></pre></td></tr></table></figure>

<h1 id="5">控制流</h1>

<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p>Dart 支持 for 循环、while 和 do-while 回路，以及 break 和 continue。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> callbacks = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">callbacks.add(() =&gt; <span class="built_in">print</span>(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">final</span> c <span class="keyword">in</span> callbacks) &#123;</span><br><span class="line">c();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//The ouput is 0 and then 1, as expected.</span></span><br></pre></td></tr></table></figure>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>Dart 还支持 if 、 if-case 和 switch 分支语句。<br><br>if 后面括号中的条件必须是计算结果为布尔值的表达式。<br><br>if-case 语句支持模式匹配。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (pair <span class="keyword">case</span> [<span class="built_in">int</span> x, <span class="built_in">int</span> y]) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Was coordinate array <span class="subst">$x</span>, <span class="subst">$y</span>&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> FormatException(<span class="string">&#x27;Invalid coordinates.&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>switch 语句有如下规则：<br></p>
<ul>
<li>非空的 case 子句中完成后跳转到 switch 的末尾， 不需要 break。</li>
<li>空 case 子句会隐式添加 fallthrough</li>
<li>可以使用 continue +标签 来实现非顺序的 fallthrough</li>
<li>可以使用default 或 _</li>
<li>支持进一步条件约束，仅需要在 case 主体之后添加 <code>when</code> 子句（if-case 语句中也支持）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;OPEN&#x27;</span>:</span><br><span class="line">        executeOpen();</span><br><span class="line">        <span class="keyword">continue</span> newCase;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;DENIED&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;CLOSE&#x27;</span>:</span><br><span class="line">        executeClosed();    <span class="comment">//Runs for both DENIED and CLOSED</span></span><br><span class="line">    newCase:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;PENDING&#x27;</span>:</span><br><span class="line">        executeNowClosed(); <span class="comment">//Runs for both OPEN and PENDING</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从 Dart 3.0 版本开始，支持 switch 表达式。 switch 表达式必须作为语句的一部分，而不能是单独的语句。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="keyword">switch</span> (y) &#123;...&#125;;   <span class="comment">//this will run switch</span></span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">switch</span> (x) &#123;...&#125;);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">switch</span> (x) &#123;...&#125;;</span><br><span class="line"><span class="comment">/*error usage</span></span><br><span class="line"><span class="comment">* switch (x) &#123;...&#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>switch 表达式遵循下述规则：<br></p>
<ul>
<li>Cases 不再需要使用 case 关键字</li>
<li>case 主体是一个表达式而不是一系列语句。</li>
<li>每个 case 都必须有一个 body ，空 case 没有隐式的 fallthrough</li>
<li>使用 <code>=&gt;</code> 而不是 <code>:</code></li>
<li>使用 <code>,</code> 分隔 Cases</li>
<li>默认只能使用 <code>_</code></li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">token = <span class="keyword">switch</span> (charCode) &#123;</span><br><span class="line">    slash || star || plus || minus =&gt; <span class="keyword">operator</span>(charCode),</span><br><span class="line">    comma || semicolon =&gt; punctuation(charCode),</span><br><span class="line">    &gt;= digit0 &amp;&amp; &lt;= digit9 =&gt; number(),</span><br><span class="line">    _ =&gt; <span class="keyword">throw</span> FormatException(<span class="string">&#x27;Invalid&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6">错误处理</h1>

<p>Dart 使用 <code>throw</code> 抛出异常，默认提供了 Exception 和 Error 类型，但实际上 Dart 可以抛出任意非空对象作为异常。<br><br>Dart 使用 <code>catch</code> 捕捉异常，使用 <code>on</code> 在捕捉时指定异常类型，使用 <code>rethrow</code> 传播异常， 使用 <code>finally</code> 执行最终执语句。<br><br>如果在 finally 子句之前异常匹配任意 catch 字句，则执行完 finally 字句后异常会被隐式传播。<br><br>catch 子句允许一个或两个参数，第一个参数时抛出的异常，第二个参数的堆栈跟踪（ StackTrace 对象）。<br><br>Dart 中的方法并不声明它们可能抛出哪些异常，并且不需要捕获任何异常。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> misBehave() &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        breedMoreLlamas();</span><br><span class="line">    &#125; <span class="keyword">on</span> OutofLamasException&#123;</span><br><span class="line">        buyMoreLlamas();</span><br><span class="line">    &#125; <span class="keyword">on</span> Exception <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Unknown exception: <span class="subst">$e</span>&#x27;</span>);</span><br><span class="line">        <span class="keyword">rethrow</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e, s) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Exception details:\n <span class="subst">$e</span>&#x27;</span>);</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Stack trace:\n <span class="subst">$s</span>&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        cleanLlamaStalls();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="7">类 & 对象</h1>

<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Dart 是一种面向对象的语言，具有类和基于 mixin 的继承。每个对象都是一个类的实例，除 Null 之外的所有类都是从 Object 中派生。尽管每个类（顶层类 Object? 除外）只有一个超类，但是使用 mixin 可以实现类体在多个类层次结构中重用。扩展方法是一种在不更改类或创建子类的情况下向类添加功能的方法。类修饰符允许你控制库如何对类进行子类型化。<br></p>
<h4 id="成员使用"><a href="#成员使用" class="headerlink" title="成员使用"></a>成员使用</h4><p>使用点（<code>.</code>）来引用对象的变量或方法。<br></p>
<h4 id="构造方法重载"><a href="#构造方法重载" class="headerlink" title="构造方法重载"></a>构造方法重载</h4><p>构造方法的名称可以是 ClassName 或 Classname.identifier ，构造函数名称前的 new 关键字可以省略：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Point(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = Point(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> p3 = Point.fromJson(&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>大多数语言重载构造函数的方式是重载同名构造函数，而 Dart 选择给构造函数提供 identifier 来实现重载。<br></p>
<h4 id="常量对象"><a href="#常量对象" class="headerlink" title="常量对象"></a>常量对象</h4><p>有些类提供了常量构造函数，如果要使用该常量构造函数创建编译时常量，要在构造函数名称前使用 <code>const</code> 关键字。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">const</span> ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>const 关键字作用的一定得是常量构造函数，而不能是普通的构造函数。<br><br>如果构造两个相同的编译时常量实际上它们会是一个实例。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">const</span> ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">const</span> ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(identical(a, b));    <span class="comment">//They are the same instance!</span></span><br></pre></td></tr></table></figure>
<p>如果是在常量上下文中，你可以省略除第一个 const 关键字之外的其他 const 声明。比如下面的两个语句是等效的：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pointAndLine = <span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="string">&#x27;point&#x27;</span>: <span class="keyword">const</span> [<span class="keyword">const</span> ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">    <span class="string">&#x27;line&#x27;</span>: <span class="keyword">const</span> [<span class="keyword">const</span> ImmutablePoint(<span class="number">1</span>, <span class="number">10</span>), <span class="keyword">const</span> ImmutablePoint(<span class="number">-2</span>, <span class="number">11</span>)],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> pointAndLine = &#123;</span><br><span class="line">    <span class="string">&#x27;point&#x27;</span>: [ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>)],</span><br><span class="line">    <span class="string">&#x27;line&#x27;</span>: [ImmutablePoint(<span class="number">1</span>, <span class="number">10</span>), ImmutablePoint(<span class="number">-2</span>, <span class="number">11</span>)],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>常量构造函数也可以构建非常量对象：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = ImmutablePoint(<span class="number">2</span>, <span class="number">2</span>);   <span class="comment">// a isn&#x27;t a constant</span></span><br></pre></td></tr></table></figure>
<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><p>我们可以获取对象的类型：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The type of a is <span class="subst">$&#123;a.runtime.Type&#125;</span>&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>但是，使用 <code>object as type</code> 而不是 <code>object.runtimeType</code> 会使你的代码更加安全。<br></p>
<h4 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h4><p>对于普通的成员变量，必须设定初始值，可以在声明时，也可以在构造函数参数中，还可以在初始值设定列表中。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="built_in">double?</span> x;  <span class="comment">//initially null</span></span><br><span class="line">    <span class="built_in">double</span> y = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">double</span> z;</span><br><span class="line"></span><br><span class="line">    Point(<span class="keyword">this</span>.z);</span><br><span class="line">    Point.unz(): z = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>没有使用 <code>late</code> 关键字描述的成员变量的创建时机为创建实例后，构造函数及其初始值设定列表项执行之前。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="built_in">double?</span> x= <span class="number">1.5</span>;</span><br><span class="line">    <span class="comment">//ERROR </span></span><br><span class="line">    <span class="comment">//double? y = this.x;</span></span><br><span class="line">    <span class="built_in">double?</span> y = <span class="number">1.5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">late</span> <span class="built_in">double?</span> y = <span class="keyword">this</span>.x;</span><br><span class="line"></span><br><span class="line">    Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有成员变量都会生成一个隐式的 getter 方法。没有使用 <code>final</code> 描述的成员变量，或者使用了 <code>late final</code> 描述但是没有初始值设定项的成员变量，都会生成一个隐式的 setter 方法。<br><br>使用 <code>final</code> 描述的成员变量必须只设置只设置一次值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfileMark</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">DateTime</span> start = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line">    ProfileMark(<span class="keyword">this</span>.name);</span><br><span class="line">    ProfileMark.unnamed(): name = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果要在构造函数政务启动后才分配 final 成员变量的值，可以使用下述方法：<br></p>
<ul>
<li>使用工厂构造函数</li>
<li>使用 late final 关键字描述。注意，没有初始值设定项的 late final 成员变量会隐式添加一个 setting 方法。</li>
</ul>
<h4 id="隐式接口"><a href="#隐式接口" class="headerlink" title="隐式接口"></a>隐式接口</h4><p>所有类都隐式定义了一个接口，其中包含该类的所有实例成员（不包括类成员）及其实现的任何接口。<br><br>类可以通过在 <code>implements</code> 子句中声明一个或多个接口，然后提供接口所需的实现。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> _name;</span><br><span class="line"></span><br><span class="line">    Person(<span class="keyword">this</span>._name);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> greet(<span class="built_in">String</span> who) =&gt; <span class="string">&#x27;Hello, <span class="subst">$who</span>. I am <span class="subst">$_name</span>&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Impostor</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">get</span> _name =&gt; <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> greet(<span class="built_in">String</span> who) =&gt; <span class="string">&#x27;Hello, <span class="subst">$who</span>. Do you kone who I am?&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="static"><a href="#static" class="headerlink" title="static"></a>static</h4><p>使用 <code>static</code> 关键字可以在类中定义类变量（也称静态变量）和类方法。<br><br>静态变量在使用之前不会初始化。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> initialCapacity = <span class="number">16</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类方法不在实例上运行，因此也无权访问 <code>this.</code> 。静态方法可以作为编译时常量。<br></p>
<h2 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h2><p>最常见的构造函数是创建与其类同名的函数来声明构造函数。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="built_in">double</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">double</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一般会使用<strong>初始化形式参数</strong>的功能来简化将构造函数的参数分配给实例变量的过程。<br><br><strong>构造函数是不会继承的。</strong><br></p>
<h4 id="默认构造函数"><a href="#默认构造函数" class="headerlink" title="默认构造函数"></a>默认构造函数</h4><p>如果未声明构造函数，则会提供默认构造函数。默认构造函数没有参数，并且调用超类中的无参数构造函数。<br></p>
<h4 id="命名构造函数"><a href="#命名构造函数" class="headerlink" title="命名构造函数"></a>命名构造函数</h4><p>命名构造函数可以为类实现多个构造函数。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> xOrigin = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> yOrigin = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> x;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> y;</span><br><span class="line"></span><br><span class="line">    Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">    Point.origin(): x = xOrigin, y = yOrigin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述的构造函数还使用到了<strong>初始值设定列表</strong>的功能。<br><br>命名构造函数的使用也很方便，就是 <code>ClassName.identifier()</code>。<br></p>
<h4 id="初始值设定列表"><a href="#初始值设定列表" class="headerlink" title="初始值设定列表"></a>初始值设定列表</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">Point.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">double</span>&gt; json): x = json[<span class="string">&#x27;x&#x27;</span>]!, y = json[<span class="string">&#x27;y&#x27;</span>] &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;In Point.fromJson(): (<span class="subst">$x</span>, <span class="subst">$y</span>)&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>
<p>初始值设定列表项的右侧无权访问 this 。</p>
<h4 id="调用非默认超类构造函数"><a href="#调用非默认超类构造函数" class="headerlink" title="调用非默认超类构造函数"></a>调用非默认超类构造函数</h4><p>默认情况下，子类中的构造函数会调用超类的未命名、无参数构造函数。执行顺序如下：<br></p>
<ul>
<li>初始值设定列表</li>
<li>超类构造函数</li>
<li>构造函数的主体</li>
</ul>
<p>如果超类没有无参构造函数，或者你需要调用超类的其他构造函数，你就需要手动调用超类的构造函数。<br><br>手动调用超类构造函数的方法是在冒号( <code>:</code> )之后，函数体之前。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="built_in">String?</span> firstName;</span><br><span class="line"></span><br><span class="line">    Person.fromJson(<span class="built_in">Map</span> data) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;in Person&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    Employee.fromJson(<span class="keyword">super</span>.data) : <span class="keyword">super</span>.fromJson() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;in Employee&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main &#123;</span><br><span class="line">    <span class="keyword">var</span> employee = Employee.fromJson(&#123;&#125;);</span><br><span class="line">    <span class="built_in">print</span>(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码中手动调用了超类的构造函数，并且使用了<strong>超级参数</strong>功能将子类构造函数的入参直接分配到超类的构造函数入参上。<br></p>
<h4 id="超级参数"><a href="#超级参数" class="headerlink" title="超级参数"></a>超级参数</h4><p>超级参数功能可以避免手动将每个参数传递到超类的构造函数中。其语法与初始化形式参数的类似。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector2d</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> x;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> y;</span><br><span class="line"></span><br><span class="line">    Vector2d(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector3d</span> <span class="keyword">extends</span> <span class="title">Vector2d</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> z;</span><br><span class="line"></span><br><span class="line">    Vector3d(<span class="keyword">super</span>.x, <span class="keyword">super</span>.y, <span class="keyword">this</span>.z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此功能不能与<strong>重定向构造函数</strong>一起使用。<br></p>
<h4 id="重定向构造函数"><a href="#重定向构造函数" class="headerlink" title="重定向构造函数"></a>重定向构造函数</h4><p>有时，构造函数的唯一目的是重定向都同一个类中的另一个构造函数。<br><br>重定向构造函数没有函数体，使用 <code>this.</code> 调用其他构造函数。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="built_in">double</span> x, y;</span><br><span class="line"></span><br><span class="line">    Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">    Point.alongXAxis(<span class="built_in">double</span> x): <span class="keyword">this</span>(x, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="常量构造函数"><a href="#常量构造函数" class="headerlink" title="常量构造函数"></a>常量构造函数</h4><p>如果类生成的对象永不更改，则可以使这些对象成为编译时常量。为此我们可以定义一个 const 构造函数， 并确保所有成员变量都是 final 。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImmutablePoint</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> ImmutablePoint origin = ImmutablePoint(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    finnal <span class="built_in">double</span> x, y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ImmutablePoint(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="工厂构造函数"><a href="#工厂构造函数" class="headerlink" title="工厂构造函数"></a>工厂构造函数</h4><p>在实现并不总是创建其类的新实例的构造函数时，我们可以使用关键字 <code>factory</code> 来声明一个工厂构造函数，它可能会从缓存中返回一个实例，或者返回子类型的实例。<br><br>工厂构造函数无法访问 this 。<br>工厂构造函数的调用与其他构造函数一样。</p>
<h2 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h2><p>成员方法与其他语言的类似。<br><br>Dart 允许你使用 <code>operator</code> 关键字重载下述的运算符：<br><br><code>&lt;</code>     <code>&gt;</code>    <code>&lt;=</code>     <code>&gt;=</code>    <code>==</code>    <code>~</code><br><code>-</code>     <code>+</code>     <code>/</code>     <code>~/</code>    <code>*</code>     <code>%</code><br><code>|</code>     <code>^</code>     <code>&amp;</code>     <code>&lt;&lt;</code>    <code>&gt;&gt;&gt;</code>   <code>&gt;&gt;</code><br><code>[]=</code>   <code>[]</code></p>
<h4 id="抽象方法"><a href="#抽象方法" class="headerlink" title="抽象方法"></a>抽象方法</h4><p>只有声明没有实现的方法叫做抽象方法。<br><br>抽象方法只能存在于抽象类或混合类中。<br><br>使用 <code>abstrcat</code> 关键字声明抽象类。<br></p>
<h4 id="getter-和-setter"><a href="#getter-和-setter" class="headerlink" title="getter 和 setter"></a>getter 和 setter</h4><p>getter 和 setter 是对对象属性进行读写访问的特殊方法。我们可以使用 <code>get</code> 和 <code>set</code> 关键字实现 getter 和 setter 来创建其他属性：<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="built_in">double</span> left, top, width, height;</span><br><span class="line"></span><br><span class="line">    Rectangle(<span class="keyword">this</span>.left, <span class="keyword">this</span>.top, <span class="keyword">this</span>.widht, <span class="keyword">this</span>.height);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> <span class="keyword">get</span> right =&gt; left + width;</span><br><span class="line">    <span class="keyword">set</span> right(<span class="built_in">double</span> value) =&gt; left = value - width;</span><br><span class="line">    <span class="built_in">double</span> <span class="keyword">get</span> bottom =&gt; top + height;</span><br><span class="line">    <span class="keyword">set</span> bottom =&gt; top = value - height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> rect = Rectangle(<span class="number">3</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">15</span>);</span><br><span class="line">    <span class="keyword">assert</span>(rect.left == <span class="number">3</span>);</span><br><span class="line">    rect.right = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">assert</span>(rect.left == <span class="number">-8</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="特殊的成员方法"><a href="#特殊的成员方法" class="headerlink" title="特殊的成员方法"></a>特殊的成员方法</h4><p>如果要实现像调用函数一样使用对象，要在类中定义 call() 方法。<br><br>call() 方法的返回值和参数都可以自定义。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WannabeFunction</span> </span>&#123;</span><br><span class="line">    <span class="built_in">String</span> call(<span class="built_in">String</span> a, <span class="built_in">String</span> b, <span class="built_in">String</span> c) =&gt; <span class="string">&#x27;<span class="subst">$a</span> <span class="subst">$b</span> <span class="subst">$c</span>&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wf = WannabeFunction();</span><br><span class="line"><span class="keyword">var</span> out = wf(<span class="string">&#x27;Hi&#x27;</span>, <span class="string">&#x27;there&#x27;</span>, <span class="string">&#x27;gang&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; <span class="built_in">print</span>(out);</span><br></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>使用 <code>extends</code> 关键字表示继承， 使用 <code>super</code> 引用超类。<br><br>子类可以重写实例方法、 getter 和 setter 。你如果你愿意，你可以使用 @override 批注。<br><br>重写需要满足下述要求：<br></p>
<ul>
<li>返回类型必须与重写方法的返回类型相同或是其子类。</li>
<li>参数类型必须与重写方法的参数类型相同或是其超类。</li>
<li>参数中，位置参数的数量要一致。</li>
<li>泛型方法不能重写非泛型方法，非泛型方法不能重写泛型方法。</li>
</ul>
<p>有时你可能想要通过使用子类作为参数类型来缩小输入，那请使用 covariant 关键字。<br>需要注意的是，如果你重写了 <code>==</code> 运算符，那你也要重写 hashCode 的 getter 。</p>
<h4 id="noSuchMethod"><a href="#noSuchMethod" class="headerlink" title="noSuchMethod()"></a>noSuchMethod()</h4><p>这个一个特殊的方法，如果你需要可以重写这个方法。<br></p>
<h2 id="混入-Mixin"><a href="#混入-Mixin" class="headerlink" title="混入( Mixin )"></a>混入( Mixin )</h2><p>Mixins 是一种定义代码的方法，可以在多个类层次结构中重用。它们旨在为成员提供集体实现。<br><br>在定义类时，使用 with 子句并声明一个或多个 mixin 。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Musician</span> <span class="keyword">extends</span> <span class="title">Performer</span> <span class="title">with</span> <span class="title">Musical</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 <code>mixin</code> 关键字声明一个 mixin 。同时 mixin 需要满足下述规则：<br></p>
<ul>
<li>Mixin 中不能使用 extends 。</li>
<li>Mixin 中不能声明任何生成构造函数。（也就是只允许一个默认构造函数）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mixin</span> Musical &#123;</span><br><span class="line">    <span class="built_in">bool</span> canPlayPiano = <span class="keyword">false</span>;</span><br><span class="line">    <span class="built_in">bool</span> canCompose = <span class="keyword">false</span>;</span><br><span class="line">    <span class="built_in">bool</span> canConduct = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> entertainMe() &#123;</span><br><span class="line">        <span class="keyword">if</span> (canPlayPiano) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Playing piano&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (canConduct) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Waving hands&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Humming  to self&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有时候你希望限制可以使用 mixin 的类型，则可以在声明 mixin 时使用 <code>on</code> 关键字来指定用于限制的超类。<br><br>这样子，只有继承链 (<code>extends</code>) 或接口实现链 (<code>implements</code>) 中有该超类的类才能使用该 mixin 。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Musician</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">mixin</span> MusicalPerformer <span class="keyword">on</span> Musician &#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingerDancer</span> <span class="keyword">extends</span> <span class="title">Musician</span> <span class="title">with</span> <span class="title">MusicalPerformer</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mixin-class"><a href="#mixin-class" class="headerlink" title="mixin class"></a>mixin class</h4><p><code>mixin</code> 声明定义类 mixin ，<code>class</code> 声明定义类一个类。<code>mixin class</code> 声明定义一个类，这个类既可用作常规类，也可用作 mixin 。它需要同时遵守 mixin 和 class 的约束。<br></p>
<ul>
<li>mixin 声明不能有 extends 或 with 字句</li>
<li>class 声明不能有 on 字句</li>
</ul>
<h4 id="abstract-mixin-class"><a href="#abstract-mixin-class" class="headerlink" title="abstract mixin class"></a>abstract mixin class</h4><p>如果你想在 mixin class 上实现类似 on 字句的效果，可以使用 <code>abstract</code> 关键字，并在其中定义所依赖的抽象方法。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">mixin</span> <span class="class"><span class="keyword">class</span> <span class="title">Musician</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span> playInstrument(<span class="built_in">String</span> instrumentName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> playPiano() &#123;</span><br><span class="line">        playInstrument(<span class="string">&#x27;Piano&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> playFlute() &#123;</span><br><span class="line">        playInstrument(<span class="string">&#x27;Flute&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Virtuoso</span> <span class="title">with</span> <span class="title">Musician</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span> playInstrument(<span class="built_in">String</span> instrumentName) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Plays the <span class="subst">$instrumentName</span> beautifully&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Novice</span> <span class="keyword">extends</span> <span class="title">Musician</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span> playInstrument(<span class="built_in">String</span> instrumentName) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Plays the <span class="subst">$instrumentName</span> poorly&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;red, green, blue&#125;</span><br></pre></td></tr></table></figure>
<h4 id="增强枚举"><a href="#增强枚举" class="headerlink" title="增强枚举"></a>增强枚举</h4><p>枚举允许在其中声明变量、方法和 const 构造函数，使其获得与类相似的行为。但需遵循下述规则：<br></p>
<ul>
<li>成员变量必须是 final ，包括 mixin 添加的变量。</li>
<li>只允许 const 生成构造函数</li>
<li>工厂构造函数只允许返回一个字段，这个字段是已知的枚举实例 ( enum instance) 。</li>
<li>没有其他类可以 extends Enum 。</li>
<li>不能重写 index 、hashCode 、&#x3D;&#x3D; 运算符。</li>
<li>不能在枚举中声明与成员变量同名的枚举项。</li>
<li>枚举项是声明必须在整个枚举声明的开头，并且至少声明一个枚举项。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Vehicle <span class="keyword">implements</span> <span class="built_in">Comparable</span>&lt;Vehicle&gt; &#123;</span><br><span class="line">    car(tires: <span class="number">4</span>, passengers: <span class="number">5</span>, carbonPerKilometer: <span class="number">400</span>),</span><br><span class="line">    bus(tires: <span class="number">6</span>, passengers: <span class="number">50</span>, carbonPerKilometer: <span class="number">800</span>),</span><br><span class="line">    bicycle(tires: <span class="number">2</span>, passengers: <span class="number">1</span>, carbonPerKilometer: <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> Vehicle(&#123;<span class="keyword">required</span> <span class="keyword">this</span>.tires, <span class="keyword">required</span> <span class="keyword">this</span>.passemgers, <span class="keyword">required</span> <span class="keyword">this</span>.carbonPerKilometer&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> tires;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> passengers;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> carbonPerKilometer;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> <span class="keyword">get</span> carbonFootprint =&gt; (carbonPerKilometer / passengers).round();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">bool</span> <span class="keyword">get</span> isTwoWheeled =&gt; <span class="keyword">this</span> == Vehicle.bicycle;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="built_in">int</span> compareTo(Vehicle other) =&gt; carbonFootprint- other.carbonFootprint;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用枚举"><a href="#使用枚举" class="headerlink" title="使用枚举"></a>使用枚举</h4><p>像访问类的静态变量一样访问枚举值。<br><br>枚举中的每个值都有一个 index 的 getter ，它返回枚举值声明的顺序，从 0 开始。<br><br>使用 values 常量可以获取该枚举的值列表。<br><br>使用 name 属性获取枚举值名称。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> favoriteColor = Color.blue;</span><br><span class="line"><span class="keyword">assert</span>(Color.red.index == <span class="number">0</span>);</span><br><span class="line"><span class="built_in">List</span>&lt;Color&gt; colors = Color.values;</span><br><span class="line"><span class="built_in">print</span>(Color.blue.name);<span class="comment">//&#x27;blue&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="扩展方法"><a href="#扩展方法" class="headerlink" title="扩展方法"></a>扩展方法</h2><p>我们可以使用 <code>extension on</code> 关键字扩展类的方法、getter 、setter 或运算符。也可以扩展静态字段和 static helper methods 。<br><br>在 extension 和 on 中间我们可以定义扩展的名称。如果扩展名没有显式定义或者扩展名是以 <code>_</code> 开头的，那该扩展仅在声明它们的库中可见。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> NumberParsing <span class="keyword">on</span> <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="built_in">int</span> parseInt() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>.parse(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> parseDouble() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">double</span>.parse(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;42&#x27;</span>.parseInt());</span><br><span class="line"><span class="built_in">print</span>(NumberParsing(<span class="string">&#x27;42&#x27;</span>).parseInt());</span><br></pre></td></tr></table></figure>
<p>如果变量类型声明为 dynamic ，则不能在该变量上调用扩展方法。<br></p>
<h2 id="扩展类型"><a href="#扩展类型" class="headerlink" title="扩展类型"></a>扩展类型</h2><p>事实上，扩展类型是不安全的抽象，尽管它能轻松修改现有类型的接口而不产生实际包装器的成本。<br></p>
<h1 id="8">类修饰符</h1>

<p>类修饰符关键字位于类或 mixin 声明之前，包括：<br></p>
<ul>
<li>abstract</li>
<li>base</li>
<li>final</li>
<li>interface</li>
<li>sealed</li>
<li>mixin</li>
</ul>
<p>只有 base 修饰符可以出现在 mixin 声明之前。<br></p>
<h4 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h4><p>声明一个抽象类，抽象类不能直接构造实例。<br></p>
<h4 id="base"><a href="#base" class="headerlink" title="base"></a>base</h4><p>强制lei或 mixin 实现。同时基类不允许在其自己的库之外进行被 implements 。<br><br>必须将实现或继承基类的任何类标记为 base 、final 或 sealed 。这样可以防止外部库破坏基类保证。<br></p>
<h4 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h4><p>interface 定义的接口不能在外部库中被继承。</p>
<h4 id="final"><a href="#final" class="headerlink" title="final"></a>final</h4><p>禁止当前类被外部库继承或 implements 。不过可以在同一库中被继承或 implements 。因此其任何子类也必须标记为 base 、final 或 sealed。<br></p>
<h4 id="sealed"><a href="#sealed" class="headerlink" title="sealed"></a>sealed</h4><p>描述该类的子类是已知的、可枚举的。<br></p>
<h2 id="组合类修饰符"><a href="#组合类修饰符" class="headerlink" title="组合类修饰符"></a>组合类修饰符</h2><p>类声明可以安装顺序排列：<br></p>
<ul>
<li>（可选）abstract</li>
<li>（可选）base 、interface 、 final 或 sealed</li>
<li>（可选）mixin</li>
<li>class 关键字本身</li>
</ul>
<p>一些类修饰符是不能组合使用的：<br></p>
<ol>
<li>abstract 和 sealed 。因为 sealed 已经是隐式 abstract 。</li>
<li>interface 、final 或 sealed ，它们与 mixin 不能混用，因为它们会阻止混入。</li>
</ol>
<h1 id="9">并发</h1>

<p>此章节由于对于 Dart 的并发编程没有什么理解，无法进行较好的整理。故延后。<br><a target="_blank" rel="noopener" href="https://dart.cn/language/concurrency">Dart 并发</a></p>
<h1 id="10">空安全</h1>

<p>在没有空安全之前，空类型可以看作是所有类型的子类。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405071924553.png"><br>在空安全之后，空类型是一个单独的类型。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405071925831.png"><br>可空类型是该类型与空类型的超类。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405071925353.png"><br>在空安全之后，函数参数的隐式类型转换被移除。<br><br>在没有空安全之前，Dart 的类型系统中，Object 是顶层类型，Null 是底层类型。在空安全之后，Object? 是顶层类型，Never 是底层类型。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405071927113.png"><br>throw 表达式的静态类型就是 Never 。<br></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Never</span> wrongType(<span class="built_in">String</span> type, <span class="built_in">Object</span> value) &#123;</span><br><span class="line">    <span class="keyword">throw</span> ArgumentError(<span class="string">&#x27;Expected <span class="subst">$type</span>, but was <span class="subst">$&#123;value.runtimeType&#125;</span>.&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="late-关键字"><a href="#late-关键字" class="headerlink" title="late 关键字"></a>late 关键字</h2><p><code>late</code> 关键字有多种语义。<br><br>late 修饰符是“在运行时而非编译时对变量进行约束”。因此 late 修饰的变量允许延迟初始化。而加上了 late 修饰意味着“每次运行都要检查是否已经赋值”。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/20/Dart-brief/" data-id="clwpulpzy00066wqecx8idi2s" data-title="Dart 简述" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Beyond-Compare-probation" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/20/Beyond-Compare-probation/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T01:23:46.000Z" itemprop="datePublished">2024-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/20/Beyond-Compare-probation/">Beyond Compare 试用期</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#1">前言</a><br><a href="#2">MacOS 下的解决方案</a><br><a href="#3">Windows 下的解决方案</a></p>
<h1 id="1">前言</h1>

<p>本教程旨在记录笔者是如何解决使用 <strong>Beyond Compare</strong> 时遇到试用期到期问题。<br><br>Beyond Compare 软件可以直接在<a target="_blank" rel="noopener" href="https://www.scootersoftware.com/download">官网</a>上下载，笔者自己使用的 Beyond Compare 4。<br></p>
<h1 id="2">MacOS 下的解决方案</h1>

<p> 第一步，进入 Beyond Compare 软件应用目录，路径如下：<br></p>
<pre><code>/Applications/Beyond Compare.app/Contents/MacOS
</code></pre>
<p>第二步，修改启动程序文件 BCompare 为 BCompare.real<br></p>
<pre><code>mv Bcompare Bcompare.real
</code></pre>
<p>第三步，创建一个新的启动程序文件 BCompare<br></p>
<pre><code>vi BCompare
</code></pre>
<p>文件内容如下：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除注册信息</span></span><br><span class="line">rm &quot;/Users/$(whoami)/Library/Application Support/Beyond Compare/registry.dat&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动真实的Bcompare文件</span></span><br><span class="line">&quot;`dirname &quot;$0&quot;`&quot;/BCompare.real $@</span><br></pre></td></tr></table></figure>

<p>该脚本的作用时，删除 Beyond Compare 下的注册信息文件，然后再启动真实的 BCompare 启动脚本。<br><br>第四步，给新创建的启动脚本权限：<br></p>
<pre><code>chmod a+x /Applications/Beyond\ Compare.app/Contents/MacOS/BCompare
</code></pre>
<p>完成以上步骤后，打开 Beyond Compare 就可以正常使用了。你可以注意到，每天打开后显示的剩余试用期时间都是满的。<br></p>
<h1 id="3">Windows 下的解决方案</h1>

<p>第一步，打开注册表<br><br>使用 <code>Win+R</code> 快捷键打开运行对话框，输入 <code>regedit</code> 打开注册表<br>第二步，找到 Beyond Compare 在注册表中的路径<br></p>
<pre><code>计算机\HKEY_CURRENT_USER\SOFTWARE\Scooter Software\Beyond Compare 4
</code></pre>
<p>第三步，删除其中的 CacheID 后，重新打开软件，可以看到又有30天的试用期了。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202404090954164.png"></p>
<h3 id="添加定时任务"><a href="#添加定时任务" class="headerlink" title="添加定时任务"></a>添加定时任务</h3><p>每次等软件到期后再去删除注册表信息很麻烦，可以在计算机管理中添加一个计划程序。<br><br>第一步，打开计算机管理<br><br>使用 <code>Win+R</code> 快捷键打开运行对话框，输入 <code>compmgmt.msc</code> 即可打开计算机管理。<br><br>第二步，选择任务计划程序库，导入任务<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202404090959396.png"><br>第三步，将下面 xml 代码保存为 xml 文件，用作第二步中导入任务<br></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-16&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Task</span> <span class="attr">version</span>=<span class="string">&quot;1.2&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://schemas.microsoft.com/windows/2004/02/mit/task&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RegistrationInfo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Date</span>&gt;</span>2023-12-30T10:40:05.8128741<span class="tag">&lt;/<span class="name">Date</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Author</span>&gt;</span>JiacaiGuo<span class="tag">&lt;/<span class="name">Author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Description</span>&gt;</span>清除Beyond Compare 4 有30天试用期<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">URI</span>&gt;</span>\Beyond Compare Clear Trial<span class="tag">&lt;/<span class="name">URI</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">RegistrationInfo</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Triggers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CalendarTrigger</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">StartBoundary</span>&gt;</span>2023-12-30T10:00:00<span class="tag">&lt;/<span class="name">StartBoundary</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">Enabled</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ScheduleByMonth</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">DaysOfMonth</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">Day</span>&gt;</span>1<span class="tag">&lt;/<span class="name">Day</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">DaysOfMonth</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Months</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">January</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">February</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">March</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">April</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">May</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">June</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">July</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">August</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">September</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">October</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">November</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">December</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Months</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ScheduleByMonth</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">CalendarTrigger</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Triggers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Principals</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Principal</span> <span class="attr">id</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">UserId</span>&gt;</span>S-1-5-21-1882866539-4086113214-3650236343-1001<span class="tag">&lt;/<span class="name">UserId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">LogonType</span>&gt;</span>InteractiveToken<span class="tag">&lt;/<span class="name">LogonType</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RunLevel</span>&gt;</span>LeastPrivilege<span class="tag">&lt;/<span class="name">RunLevel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Principal</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Principals</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MultipleInstancesPolicy</span>&gt;</span>IgnoreNew<span class="tag">&lt;/<span class="name">MultipleInstancesPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisallowStartIfOnBatteries</span>&gt;</span>true<span class="tag">&lt;/<span class="name">DisallowStartIfOnBatteries</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StopIfGoingOnBatteries</span>&gt;</span>true<span class="tag">&lt;/<span class="name">StopIfGoingOnBatteries</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllowHardTerminate</span>&gt;</span>true<span class="tag">&lt;/<span class="name">AllowHardTerminate</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StartWhenAvailable</span>&gt;</span>false<span class="tag">&lt;/<span class="name">StartWhenAvailable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RunOnlyIfNetworkAvailable</span>&gt;</span>false<span class="tag">&lt;/<span class="name">RunOnlyIfNetworkAvailable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">IdleSettings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">StopOnIdleEnd</span>&gt;</span>true<span class="tag">&lt;/<span class="name">StopOnIdleEnd</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RestartOnIdle</span>&gt;</span>false<span class="tag">&lt;/<span class="name">RestartOnIdle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">IdleSettings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AllowStartOnDemand</span>&gt;</span>true<span class="tag">&lt;/<span class="name">AllowStartOnDemand</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">Enabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Hidden</span>&gt;</span>false<span class="tag">&lt;/<span class="name">Hidden</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RunOnlyIfIdle</span>&gt;</span>false<span class="tag">&lt;/<span class="name">RunOnlyIfIdle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">WakeToRun</span>&gt;</span>false<span class="tag">&lt;/<span class="name">WakeToRun</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ExecutionTimeLimit</span>&gt;</span>PT72H<span class="tag">&lt;/<span class="name">ExecutionTimeLimit</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Priority</span>&gt;</span>7<span class="tag">&lt;/<span class="name">Priority</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Actions</span> <span class="attr">Context</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Exec</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Command</span>&gt;</span>C:\Windows\System32\reg.exe<span class="tag">&lt;/<span class="name">Command</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Arguments</span>&gt;</span>delete &quot;hkey_current_user\software\scooter software\beyond compare 4&quot; /v cacheid /f<span class="tag">&lt;/<span class="name">Arguments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Exec</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Actions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Task</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中， <code>&lt;Author&gt;</code> 、 <code>&lt;UserId&gt;</code> 请改为本机信息。可以通过导出其他的本机计划来查看这两个信息。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/20/Beyond-Compare-probation/" data-id="clwpulpzw00016wqe40js1hkp" data-title="Beyond Compare 试用期" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Compile-FFMPEG-on-Windows" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/20/Compile-FFMPEG-on-Windows/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T01:19:06.000Z" itemprop="datePublished">2024-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/20/Compile-FFMPEG-on-Windows/">Windows 下编译 FFMPEG</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#1">前言</a><br><a href="#2">Windows 下安装编译 FFMPEG</a></p>
<h1 id="1">前言</h1>

<p>本教程旨在记录自己源码编译安装 <strong>FFMPEG</strong> 的过程。<br><br>如果没有修改源码需求，笔者还是更建议直接从<a target="_blank" rel="noopener" href="https://ffmpeg.org/download.html">官网推荐途径</a>或者其他可信途径下载二进制文件后使用。<br></p>
<h1 id="2">Windows 下安装编译 FFMPEG</h1>

<p>首先我们要准备好编译环境，笔者这儿准备的是一台装有 Windows10 系统电脑，同时安装了 Visual Studio 2019。<br><br>在 Windows 下编译 FFMPEG 我们还需要借助 MSYS2 ，可以<a target="_blank" rel="noopener" href="https://www.msys2.org/">在此下载</a>此软件。我们会在 MSYS2 环境中编译 FFMPEG ，编译时使用的编译器( cl.exe ) 和链接器( link.exe ) 则是由 VS2019 提供的。也就是说，我们使用的是 MSYS2 + MSVC 的方案。<br></p>
<h3 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h3><p>编译环境准备好之后，我们下载一份 FFMPEG 源码，你可以是直接下载<a target="_blank" rel="noopener" href="https://git.ffmpeg.org/ffmpeg.git">最新版本</a>，也可以从官网下载<a target="_blank" rel="noopener" href="https://ffmpeg.org/download.html">指定版本</a>。<br><br>源码下载后需要修改源码，将其中包含 CC_IDENT 宏的代码注释掉。否则会在编译时遇到如下错误。<br></p>
<pre><code>error C2296: “%”: 非法，左操作数包含“char [138]”类型
</code></pre>
<p>源码中最好不要包含任何中文字符，否则中编译时会出现很多如下警告：<br></p>
<pre><code> warning C4828: 文件包含在偏移 0x227 处开始的字符，该字符在当前源字符集中无效(代码页 65001)。
</code></pre>
<p>这同样意味着，你要删除 CC_IDENT 这个宏定义，因为其包含中文字符。<br></p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>在打开 MSYS2 前，我们先进入它的安装目录，修改 <strong>msys2_shell.cmd</strong> 文件，将文件中第<strong>17</strong>行代码打开，即去掉 <strong>rem</strong> 关键字，如下所示：<br></p>
<pre><code>@echo off
setlocal EnableDelayedExpansion

set &quot;WD=%__CD__%&quot;
if NOT EXIST &quot;%WD%msys-2.0.dll&quot; set &quot;WD=%~dp0usr\bin\&quot;
set &quot;LOGINSHELL=bash&quot;
set /a msys2_shiftCounter=0

rem To activate windows native symlinks uncomment next line
rem set MSYS=winsymlinks:nativestrict

rem Set debugging program for errors
rem set MSYS=error_start:%WD%../../mingw64/bin/qtcreator.exe^|-debug^|^&lt;process-id^&gt;

rem To export full current PATH from environment into MSYS2 use &#39;-use-full-path&#39; parameter
rem or uncomment next line
set MSYS2_PATH_TYPE=inherit
...
</code></pre>
<p>打开后， MSYS2 可以继承 Windows 控制台的环境变量。<br>之后，打开 <code>x64 Native Tools Command Prompt for VS 2019</code> 命令窗口，可以通过如下方式找到：<br></p>
<pre><code>Windows 开始菜单 -&gt; Visual Studio 2019 -&gt; x64 Native Tools Command Prompt for VS 2019
</code></pre>
<p>然后在该命令窗口中输入下面的命令启动 MSYS2 软件：<br></p>
<pre><code>#切换盘符，如果需要的话
#d:

#进入 MSYS2 的安装目录
cd D:\Application\msys64

#启动 MSYS2
msys2_shell.cmd
</code></pre>
<p>此时会弹出 MSYS2 的命令窗口，在窗口中输入下面命令，安装必要的编译工具：<br></p>
<pre><code>pacman -S diffutils make pkg-config yasm
</code></pre>
<p>当编译工具安装好后，在 MSYS2 命令窗口进入 FFMPEG 源码目录：<br></p>
<pre><code>cd /d/WorkSpace/FFMPEG/ffmpeg-4.3.6
</code></pre>
<p>我的 FFMPEG 源码路径是 D:&#x2F;WorkSpace&#x2F;FFMPEG&#x2F;ffmpeg-4.3.6。<br><br>紧接着，运行 FFMPEG 源码目录中的 <code>configure</code> 脚本生成 <strong>Makefile</strong> 文件，如下：<br></p>
<pre><code>./configure --prefix=/usr/local/ffmpeg --arch=x86_64 --disable-amd3dnow --disable-amd3dnowext --enable-gpl --enable-nonfree --enable-shared --disable-doc --disable-postproc --disable-avdevice --toolchain=msvc
</code></pre>
<p>上述命令的含义是使用 <strong>msvc</strong> 作为 FFMPEG 的编译工具链；编译安装的 FFMPEG 库被放到 <code>/usr/local/ffmpeg</code> 目录下，该目录是 MSYS2 环境下的目录；编译的是动态库。<br><br>至于其他的构建选项是基于笔者的需求，可以运行 <code>./configure --help</code> 查看支持哪些构建选项。<br><br>上述脚本执行完成后，中 FFMPEG 源码目录下会多一个 Makefile 文件，然后我们就可以编译安装 FFMPEG 了，执行如下命令：<br></p>
<pre><code>make -j 8 &amp;&amp; make install
</code></pre>
<p>因为我们没有安装其他第三方库，因此会有一些内容是没有编译的，比如 ffplay.exe ，因为没有 SDL 库。有需要的话可以自行安装。<br><br>同时我们可以在执行 ffmpeg.exe 程序时看到我们的构建脚本，也就是说我们也可以运行其他途径提供的二进制程序来查看它们的构建脚本。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/20/Compile-FFMPEG-on-Windows/" data-id="clwpulpzy00046wqe3bfohlw7" data-title="Windows 下编译 FFMPEG" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Hexo-environment-configuration" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/05/20/Hexo-environment-configuration/" class="article-date">
  <time class="dt-published" datetime="2024-05-20T01:13:17.000Z" itemprop="datePublished">2024-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/05/20/Hexo-environment-configuration/">Hexo 环境配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a href="#1">前言</a><br><a href="#2">本地环境</a><br><a href="#3">云端环境</a></p>
<h1 id="1">前言</h1>

<p>本文记录笔记使用 Hexo 搭建个人博客网站的过程。<br></p>
<h1 id="2">本地环境</h1>

<h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>本地需要先安装 Git 和 Node.js ，具体安装可以参考<a target="_blank" rel="noopener" href="https://hexo.io/docs/">此文档</a>。<br>前置环境安装完成后后，执行下述语句安装 Hexo ：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>如果有遇到没有文件夹访问权限问题，可以使用下述语句：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R `whiami` path</span><br></pre></td></tr></table></figure>
<h2 id="本地博客"><a href="#本地博客" class="headerlink" title="本地博客"></a>本地博客</h2><p>使用下述指令创建博客工作空间：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br></pre></td></tr></table></figure>
<p>一个比较常见的博客工作空间结构如下：<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405202026908.png"><br>创建完成后，我们可以修改 _config.yml 文件中的内容来简单的自定义我们的博客网站。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405202023026.png"><br>比较主要的字段是 <strong>title</strong> 和 <strong>author</strong> 。<strong>language</strong> 字段是在语言国际性下标识默认语言。<strong>timezone</strong>字段会自动识别，如果需要也可以静态固定。<br><br>source 文件夹一般用于存放文章， <strong>_posts</strong> 存放要发表的文章， <strong>_drafts</strong> 存放草稿。<br><br>themes 文件夹存放我们需要的主体，可以在<a target="_blank" rel="noopener" href="https://hexo.io/themes/">官网</a>查找需要的主题然后应用到自己的博客网站上。但是一般刚搭建时不推荐大家去过多的关注主题，而是先完成网站搭建并运作起来。<br><br>使用下述语句创建新文章，默认会存放在 _posts 文件夹中：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;article name&quot;</span><br></pre></td></tr></table></figure>
<p>使用下述指定编译并本地运行博客网站：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>然后就可以通过 <code>http://localhost:4000/</code> 访问。<br></p>
<h1 id="3">云端环境</h1>

<p>搭建个人博客网站肯定是希望被别人看见，那我们就需要把博客站点部署在云端，才可以让别人通过浏览器访问到。<br><br>笔者选择了在 Github Pags 部署，方便且快捷。<br></p>
<h2 id="github-账户设置"><a href="#github-账户设置" class="headerlink" title="github 账户设置"></a>github 账户设置</h2><p>你需要有一个 <a target="_blank" rel="noopener" href="https://github.com/">github</a> 账户。<br>接着你需要创建一个私人访问 Token ，如果你已经有就不需要重新创建。<br><br>点击 github 网站右上角的头像，选择 “Settings” 进入设置页。然后在侧边栏找到 “Developer settings” 进入开发者设置页。最后选择创建私人 Token(classic) 。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202403201411328.png"><br><br>设置 Token 的过期时间时可以尽可能的延长它或者直接选择不过期。勾选下面的 “repo” 项。最后点击最下方的 “Generate Token” 按键即可。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202403201413750.png"><br><br>然后你就可以看到你生成的私人 Token ，请确保不要让其他人知晓它，在离开这个界面之前复制并保存它，否则你将找不到它。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202403201416467.png"><br></p>
<h2 id="github-仓库"><a href="#github-仓库" class="headerlink" title="github 仓库"></a>github 仓库</h2><p>假设你到 GitHub 账户名为 myName ，你需要新建一个 Github 仓库，仓库名为 <code>myName.github.io</code>。勾选添加 README 文件。<br><br><img src="https://raw.githubusercontent.com/illusorycat/MyPictureBase/main/image/202405202042714.png"><br>在本地进入你的博客工作空间，然后将github 仓库克隆到此空间：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd myBlog/</span><br><span class="line">git clone https://github.com/myName/myName.github.io.git ./</span><br></pre></td></tr></table></figure>
<p><code>https://github.com/myName/myName.github.io.git</code> 是 github 上创建的仓库路径，<code>./</code> 是表示克隆到当前目录，也就是博客工作空间文件夹。<br><br>在第一次执行 git 指令时，一般会让你输入相关信息，输入你的 github 账户名称和邮箱，已经上述提到的私人 Token 即可。如果你需要一个可视化操作界面，也可以直接下载 github Desktop 客户端。<br><br>执行下述语句编译博客网站：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<p>执行下述语句将修改提交到 github 上：<br></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;first modify&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>这样子你的修改就上传到 github 了。然后你就可以通过 myName.github.io 访问到你的博客网站了。默认一开始就有一篇 hello 文章在其中。<br><br>之后只需要在 _posts 文件夹中撰写新的文章，然后重新上述流程上传即可。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://illusorycat.github.io/2024/05/20/Hexo-environment-configuration/" data-id="clwpulpzy00056wqe1t103i7v" data-title="Hexo 环境配置" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E4%BA%BA%E7%94%9F/" rel="tag">代码人生</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E4%BB%A3%E7%A0%81%E4%BA%BA%E7%94%9F/" style="font-size: 10px;">代码人生</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 16.67px;">工具</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 20px;">算法</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 13.33px;">语法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/06/04/Swift-Algorithm-5-Array/">Swift 算法-5-数组</a>
          </li>
        
          <li>
            <a href="/2024/05/30/Swift-Algorithm-4-Substring/">Swift 算法-4-子串</a>
          </li>
        
          <li>
            <a href="/2024/05/28/Swift-Algorithm-3-SlidingWindow/">Swift 算法-3-滑动窗口</a>
          </li>
        
          <li>
            <a href="/2024/05/25/Swift-Algorithm-2-DoublePointer/">Swift 算法-2-双指针</a>
          </li>
        
          <li>
            <a href="/2024/05/23/Swift-Algorithm-1-Hash/">Swift 算法-1-哈希</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Illusory<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>